{
  "info": {
    "_postman_id": "fintrak-api-collection",
    "name": "Fintrak API",
    "description": "Complete API collection for Fintrak financial tracking application including authentication, expense management with advanced search, income tracking with filtering, categories, tags, counterparties with search capabilities, and product endpoints.",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
    "_exporter_id": "fintrak"
  },
  "item": [
    {
      "name": "Authentication",
      "item": [
        {
          "name": "Register User",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"{{user}}\",\n  \"password\": \"{{password}}\"\n}"
            },
            "url": {
              "raw": "{{rootUrl}}/api/auth/register",
              "host": [
                "{{rootUrl}}"
              ],
              "path": [
                "api",
                "auth",
                "register"
              ]
            },
            "description": "Register a new user account"
          },
          "response": [
            {
              "name": "Success",
              "originalRequest": {
                "method": "POST",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"email\": \"{{user}}\",\n  \"password\": \"{{password}}\"\n}"
                },
                "url": {
                  "raw": "{{rootUrl}}/api/auth/register",
                  "host": [
                    "{{rootUrl}}"
                  ],
                  "path": [
                    "api",
                    "auth",
                    "register"
                  ]
                }
              },
              "status": "Created",
              "code": 201,
              "_postman_previewlanguage": "json",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
              "cookie": [],
              "body": "{\n  \"id\": \"60d0fe4f5311236168a109ca\",\n  \"email\": \"{{user}}\"\n}"
            }
          ]
        },
        {
          "name": "Login User",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200) {",
                  "    const jsonData = pm.response.json();",
                  "    pm.environment.set(\"auth_token\", jsonData.token);",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"{{user}}\",\n  \"password\": \"{{password}}\"\n}"
            },
            "url": {
              "raw": "{{rootUrl}}/api/auth/login",
              "host": [
                "{{rootUrl}}"
              ],
              "path": [
                "api",
                "auth",
                "login"
              ]
            },
            "description": "Login user and receive JWT token (automatically saved to environment)"
          },
          "response": [
            {
              "name": "Success",
              "originalRequest": {
                "method": "POST",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"email\": \"{{user}}\",\n  \"password\": \"{{password}}\"\n}"
                },
                "url": {
                  "raw": "{{rootUrl}}/api/auth/login",
                  "host": [
                    "{{rootUrl}}"
                  ],
                  "path": [
                    "api",
                    "auth",
                    "login"
                  ]
                }
              },
              "status": "OK",
              "code": 200,
              "_postman_previewlanguage": "json",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
              "cookie": [],
              "body": "{\n  \"token\": \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...\",\n  \"id\": \"60d0fe4f5311236168a109ca\",\n  \"email\": \"{{user}}\"\n}"
            }
          ]
        }
      ],
      "description": "User authentication endpoints for registration and login"
    },
    {
      "name": "User",
      "item": [
        {
          "name": "Get Current User",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{auth_token}}"
              }
            ],
            "url": {
              "raw": "{{rootUrl}}/api/auth/me",
              "host": [
                "{{rootUrl}}"
              ],
              "path": [
                "api",
                "auth",
                "me"
              ]
            },
            "description": "Get current authenticated user's data"
          },
          "response": [
            {
              "name": "Success",
              "originalRequest": {
                "method": "GET",
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{auth_token}}"
                  }
                ],
                "url": {
                  "raw": "{{rootUrl}}/api/auth/me",
                  "host": [
                    "{{rootUrl}}"
                  ],
                  "path": [
                    "api",
                    "auth",
                    "me"
                  ]
                }
              },
              "status": "OK",
              "code": 200,
              "_postman_previewlanguage": "json",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
              "cookie": [],
              "body": "{\n  \"id\": \"60d0fe4f5311236168a109ca\",\n  \"email\": \"user@example.com\",\n  \"name\": \"John\",\n  \"lastName\": \"Doe\",\n  \"profilePicture\": \"https://lh3.googleusercontent.com/...\",\n  \"authProvider\": \"email\",\n  \"createdAt\": \"2021-06-21T12:00:00.000Z\",\n  \"updatedAt\": \"2021-06-21T12:00:00.000Z\"\n}"
            }
          ]
        },
        {
          "name": "Update User Profile",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{auth_token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"John\",\n  \"lastName\": \"Doe\",\n  \"email\": \"john.doe@example.com\"\n}"
            },
            "url": {
              "raw": "{{rootUrl}}/api/auth/me",
              "host": [
                "{{rootUrl}}"
              ],
              "path": [
                "api",
                "auth",
                "me"
              ]
            },
            "description": "Update current authenticated user's profile information"
          },
          "response": [
            {
              "name": "Success",
              "originalRequest": {
                "method": "PUT",
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{auth_token}}"
                  },
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"name\": \"John\",\n  \"lastName\": \"Doe\",\n  \"email\": \"john.doe@example.com\"\n}"
                },
                "url": {
                  "raw": "{{rootUrl}}/api/auth/me",
                  "host": [
                    "{{rootUrl}}"
                  ],
                  "path": [
                    "api",
                    "auth",
                    "me"
                  ]
                }
              },
              "status": "OK",
              "code": 200,
              "_postman_previewlanguage": "json",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
              "cookie": [],
              "body": "{\n  \"id\": \"60d0fe4f5311236168a109ca\",\n  \"email\": \"john.doe@example.com\",\n  \"name\": \"John\",\n  \"lastName\": \"Doe\",\n  \"profilePicture\": \"https://lh3.googleusercontent.com/...\",\n  \"authProvider\": \"email\",\n  \"createdAt\": \"2021-06-21T12:00:00.000Z\",\n  \"updatedAt\": \"2021-06-21T12:30:00.000Z\"\n}"
            }
          ]
        }
      ],
      "description": "User profile management endpoints"
    },
    {
      "name": "Analytics",
      "item": [
        {
          "name": "Get Period Summary",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{auth_token}}"
              }
            ],
            "url": {
              "raw": "{{rootUrl}}/api/analytics/period-summary?dateFrom=2025-08-01&dateTo=2025-08-31&currency=EUR&latestCount=5",
              "host": [
                "{{rootUrl}}"
              ],
              "path": [
                "api",
                "analytics",
                "period-summary"
              ],
              "query": [
                {
                  "key": "dateFrom",
                  "value": "2025-08-01",
                  "description": "Start date of the period (required, YYYY-MM-DD)"
                },
                {
                  "key": "dateTo",
                  "value": "2025-08-31",
                  "description": "End date of the period (required, YYYY-MM-DD)"
                },
                {
                  "key": "currency",
                  "value": "EUR",
                  "description": "Optional currency filter (EUR, GBP, USD)",
                  "disabled": true
                },
                {
                  "key": "latestCount",
                  "value": "5",
                  "description": "Number of latest transactions to include (default: 5)",
                  "disabled": true
                }
              ]
            },
            "description": "Get expenses and incomes for a specific time period with totals grouped by category and latest transactions"
          },
          "response": [
            {
              "name": "Success",
              "originalRequest": {
                "method": "GET",
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{auth_token}}"
                  }
                ],
                "url": {
                  "raw": "{{rootUrl}}/api/analytics/period-summary?dateFrom=2024-01-01&dateTo=2024-01-31",
                  "host": [
                    "{{rootUrl}}"
                  ],
                  "path": [
                    "api",
                    "analytics",
                    "period-summary"
                  ],
                  "query": [
                    {
                      "key": "dateFrom",
                      "value": "2024-01-01"
                    },
                    {
                      "key": "dateTo",
                      "value": "2024-01-31"
                    }
                  ]
                }
              },
              "status": "OK",
              "code": 200,
              "_postman_previewlanguage": "json",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
              "cookie": [],
              "body": "{\n  \"period\": {\n    \"from\": \"2024-01-01\",\n    \"to\": \"2024-01-31\",\n    \"currency\": \"all\"\n  },\n  \"expenses\": {\n    \"total\": 1250.75,\n    \"byCategory\": [\n      {\n        \"categoryId\": \"60d0fe4f5311236168a109cc\",\n        \"categoryKey\": \"groceries\",\n        \"categoryName\": \"Groceries\",\n        \"categoryColor\": \"#4CAF50\",\n        \"categoryIcon\": \"shopping-cart\",\n        \"total\": 450.00,\n        \"count\": 12\n      },\n      {\n        \"categoryId\": \"60d0fe4f5311236168a109cd\",\n        \"categoryKey\": \"transport\",\n        \"categoryName\": \"Transport\",\n        \"categoryColor\": \"#2196F3\",\n        \"categoryIcon\": \"car\",\n        \"total\": 320.50,\n        \"count\": 8\n      },\n      {\n        \"categoryId\": \"60d0fe4f5311236168a109ce\",\n        \"categoryKey\": \"entertainment\",\n        \"categoryName\": \"Entertainment\",\n        \"categoryColor\": \"#FF9800\",\n        \"categoryIcon\": \"movie\",\n        \"total\": 480.25,\n        \"count\": 5\n      }\n    ]\n  },\n  \"incomes\": {\n    \"total\": 3500.00,\n    \"byCategory\": [\n      {\n        \"categoryId\": \"60d0fe4f5311236168a109cf\",\n        \"categoryKey\": \"salary\",\n        \"categoryName\": \"Salary\",\n        \"categoryColor\": \"#4CAF50\",\n        \"categoryIcon\": \"briefcase\",\n        \"total\": 3000.00,\n        \"count\": 1\n      },\n      {\n        \"categoryId\": \"60d0fe4f5311236168a109d0\",\n        \"categoryKey\": \"freelance\",\n        \"categoryName\": \"Freelance\",\n        \"categoryColor\": \"#9C27B0\",\n        \"categoryIcon\": \"laptop\",\n        \"total\": 500.00,\n        \"count\": 2\n      }\n    ]\n  },\n  \"balance\": 2249.25,\n  \"latestTransactions\": [\n    {\n      \"_id\": \"60d0fe4f5311236168a109d1\",\n      \"title\": \"Monthly Salary\",\n      \"amount\": 3000.00,\n      \"currency\": \"EUR\",\n      \"category\": {\n        \"_id\": \"60d0fe4f5311236168a109cf\",\n        \"key\": \"salary\",\n        \"name\": \"Salary\",\n        \"color\": \"#4CAF50\",\n        \"icon\": \"briefcase\"\n      },\n      \"date\": \"2024-01-31T00:00:00.000Z\",\n      \"type\": \"income\"\n    },\n    {\n      \"_id\": \"60d0fe4f5311236168a109d2\",\n      \"title\": \"Cinema Tickets\",\n      \"amount\": 25.00,\n      \"currency\": \"EUR\",\n      \"category\": {\n        \"_id\": \"60d0fe4f5311236168a109ce\",\n        \"key\": \"entertainment\",\n        \"name\": \"Entertainment\",\n        \"color\": \"#FF9800\",\n        \"icon\": \"movie\"\n      },\n      \"date\": \"2024-01-28T00:00:00.000Z\",\n      \"type\": \"expense\"\n    },\n    {\n      \"_id\": \"60d0fe4f5311236168a109d3\",\n      \"title\": \"Grocery Shopping\",\n      \"amount\": 85.50,\n      \"currency\": \"EUR\",\n      \"category\": {\n        \"_id\": \"60d0fe4f5311236168a109cc\",\n        \"key\": \"groceries\",\n        \"name\": \"Groceries\",\n        \"color\": \"#4CAF50\",\n        \"icon\": \"shopping-cart\"\n      },\n      \"date\": \"2024-01-25T00:00:00.000Z\",\n      \"type\": \"expense\"\n    },\n    {\n      \"_id\": \"60d0fe4f5311236168a109d4\",\n      \"title\": \"Freelance Project\",\n      \"amount\": 250.00,\n      \"currency\": \"EUR\",\n      \"category\": {\n        \"_id\": \"60d0fe4f5311236168a109d0\",\n        \"key\": \"freelance\",\n        \"name\": \"Freelance\",\n        \"color\": \"#9C27B0\",\n        \"icon\": \"laptop\"\n      },\n      \"date\": \"2024-01-20T00:00:00.000Z\",\n      \"type\": \"income\"\n    },\n    {\n      \"_id\": \"60d0fe4f5311236168a109d5\",\n      \"title\": \"Uber Ride\",\n      \"amount\": 15.75,\n      \"currency\": \"EUR\",\n      \"category\": {\n        \"_id\": \"60d0fe4f5311236168a109cd\",\n        \"key\": \"transport\",\n        \"name\": \"Transport\",\n        \"color\": \"#2196F3\",\n        \"icon\": \"car\"\n      },\n      \"date\": \"2024-01-18T00:00:00.000Z\",\n      \"type\": \"expense\"\n    }\n  ]\n}"
            }
          ]
        }
      ],
      "description": "Analytics endpoints for financial summaries and insights"
    },
    {
      "name": "Expenses",
      "item": [
        {
          "name": "Search Expenses",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{auth_token}}"
              }
            ],
            "url": {
              "raw": "{{rootUrl}}/api/expenses/search?limit=20&offset=0&sortBy=date&sortOrder=desc&dateFrom=2024-01-01&dateTo=2024-12-31",
              "host": [
                "{{rootUrl}}"
              ],
              "path": [
                "api",
                "expenses",
                "search"
              ],
              "query": [
                {
                  "key": "title",
                  "value": "grocery",
                  "description": "Search in expense titles (case-insensitive)",
                  "disabled": true
                },
                {
                  "key": "description",
                  "value": "weekly",
                  "description": "Search in expense descriptions (case-insensitive)",
                  "disabled": true
                },
                {
                  "key": "dateFrom",
                  "value": "2024-01-01",
                  "description": "Filter expenses from this date (YYYY-MM-DD)"
                },
                {
                  "key": "dateTo",
                  "value": "2024-12-31",
                  "description": "Filter expenses until this date (YYYY-MM-DD)"
                },
                {
                  "key": "amountMin",
                  "value": "10",
                  "description": "Minimum amount filter",
                  "disabled": true
                },
                {
                  "key": "amountMax",
                  "value": "500",
                  "description": "Maximum amount filter",
                  "disabled": true
                },
                {
                  "key": "currency",
                  "value": "EUR",
                  "description": "Currency filter (EUR, GBP, USD)",
                  "disabled": true
                },
                {
                  "key": "category",
                  "value": "{{category_id}}",
                  "description": "Category ID filter",
                  "disabled": true
                },
                {
                  "key": "payee",
                  "value": "{{counterparty_id}}",
                  "description": "Payee/Counterparty ID filter",
                  "disabled": true
                },
                {
                  "key": "periodicity",
                  "value": "NOT_RECURRING",
                  "description": "Periodicity filter",
                  "disabled": true
                },
                {
                  "key": "tags",
                  "value": "weekly,vacation",
                  "description": "Tag keys filter (comma-separated, matches any)",
                  "disabled": true
                },
                {
                  "key": "limit",
                  "value": "20",
                  "description": "Number of results to return (1-100, default: 50)"
                },
                {
                  "key": "offset",
                  "value": "0",
                  "description": "Number of results to skip (default: 0)"
                },
                {
                  "key": "sortBy",
                  "value": "date",
                  "description": "Field to sort by (date, amount, title, createdAt)"
                },
                {
                  "key": "sortOrder",
                  "value": "desc",
                  "description": "Sort order (asc, desc)"
                },
                {
                  "key": "includeTotal",
                  "value": "false",
                  "description": "Whether to include total amount in response (true/false, default: false)",
                  "disabled": true
                }
              ]
            },
            "description": "Search and filter expenses with pagination and sorting. All filters are optional and can be combined."
          },
          "response": [
            {
              "name": "Success",
              "originalRequest": {
                "method": "GET",
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{auth_token}}"
                  }
                ],
                "url": {
                  "raw": "{{rootUrl}}/api/expenses/search?title=grocery&amountMin=50&limit=10",
                  "host": [
                    "{{rootUrl}}"
                  ],
                  "path": [
                    "api",
                    "expenses",
                    "search"
                  ],
                  "query": [
                    {
                      "key": "title",
                      "value": "grocery"
                    },
                    {
                      "key": "amountMin",
                      "value": "50"
                    },
                    {
                      "key": "limit",
                      "value": "10"
                    }
                  ]
                }
              },
              "status": "OK",
              "code": 200,
              "_postman_previewlanguage": "json",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
              "cookie": [],
              "body": "{\n  \"expenses\": [\n    {\n      \"_id\": \"60d0fe4f5311236168a109cb\",\n      \"title\": \"Compra en Mercadona\",\n      \"amount\": 85.50,\n      \"currency\": \"EUR\",\n      \"category\": {\n        \"_id\": \"60d0fe4f5311236168a109cc\",\n        \"key\": \"groceries\",\n        \"name\": \"Groceries\",\n        \"color\": \"#4CAF50\",\n        \"icon\": \"shopping-cart\"\n      },\n      \"payee\": {\n        \"_id\": \"60d0fe4f5311236168a109cd\",\n        \"key\": \"mercadona\",\n        \"name\": \"Mercadona\",\n        \"type\": \"company\"\n      },\n      \"date\": \"2024-01-15T00:00:00.000Z\",\n      \"periodicity\": \"NOT_RECURRING\",\n      \"tags\": [],\n      \"userId\": \"60d0fe4f5311236168a109ca\",\n      \"createdAt\": \"2024-01-15T10:00:00.000Z\",\n      \"updatedAt\": \"2024-01-15T10:00:00.000Z\"\n    }\n  ],\n  \"pagination\": {\n    \"total\": 15,\n    \"limit\": 10,\n    \"offset\": 0,\n    \"hasMore\": true\n  },\n  \"filters\": {\n    \"title\": \"grocery\",\n    \"amountMin\": \"50\"\n  },\n  \"sort\": {\n    \"sortBy\": \"date\",\n    \"sortOrder\": \"desc\"\n  },\n  \"totalAmount\": 1275.85\n}"
            },
            {
              "name": "Success with Total",
              "originalRequest": {
                "method": "GET",
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{auth_token}}"
                  }
                ],
                "url": {
                  "raw": "{{rootUrl}}/api/expenses/search?title=grocery&includeTotal=true&limit=10",
                  "host": [
                    "{{rootUrl}}"
                  ],
                  "path": [
                    "api",
                    "expenses",
                    "search"
                  ],
                  "query": [
                    {
                      "key": "title",
                      "value": "grocery"
                    },
                    {
                      "key": "includeTotal",
                      "value": "true"
                    },
                    {
                      "key": "limit",
                      "value": "10"
                    }
                  ]
                }
              },
              "status": "OK",
              "code": 200,
              "_postman_previewlanguage": "json",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
              "cookie": [],
              "body": "{\n  \"expenses\": [\n    {\n      \"_id\": \"60d0fe4f5311236168a109cb\",\n      \"title\": \"Compra en Mercadona\",\n      \"amount\": 85.50,\n      \"currency\": \"EUR\",\n      \"category\": {\n        \"_id\": \"60d0fe4f5311236168a109cc\",\n        \"key\": \"groceries\",\n        \"name\": \"Groceries\",\n        \"color\": \"#4CAF50\",\n        \"icon\": \"shopping-cart\"\n      },\n      \"payee\": {\n        \"_id\": \"60d0fe4f5311236168a109cd\",\n        \"key\": \"mercadona\",\n        \"name\": \"Mercadona\",\n        \"type\": \"company\"\n      },\n      \"date\": \"2024-01-15T00:00:00.000Z\",\n      \"periodicity\": \"NOT_RECURRING\",\n      \"tags\": [],\n      \"userId\": \"60d0fe4f5311236168a109ca\",\n      \"createdAt\": \"2024-01-15T10:00:00.000Z\",\n      \"updatedAt\": \"2024-01-15T10:00:00.000Z\"\n    }\n  ],\n  \"pagination\": {\n    \"total\": 15,\n    \"limit\": 10,\n    \"offset\": 0,\n    \"hasMore\": true\n  },\n  \"filters\": {\n    \"title\": \"grocery\"\n  },\n  \"sort\": {\n    \"sortBy\": \"date\",\n    \"sortOrder\": \"desc\"\n  },\n  \"totalAmount\": 1275.85\n}"
            }
          ]
        },
        {
          "name": "Get Expense by ID",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{auth_token}}"
              }
            ],
            "url": {
              "raw": "{{rootUrl}}/api/expenses/{{expense_id}}",
              "host": [
                "{{rootUrl}}"
              ],
              "path": [
                "api",
                "expenses",
                "{{expense_id}}"
              ]
            },
            "description": "Retrieve a specific expense by ID"
          },
          "response": [
            {
              "name": "Success",
              "originalRequest": {
                "method": "GET",
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{auth_token}}"
                  }
                ],
                "url": {
                  "raw": "{{rootUrl}}/api/expenses/60d0fe4f5311236168a109cb",
                  "host": [
                    "{{rootUrl}}"
                  ],
                  "path": [
                    "api",
                    "expenses",
                    "60d0fe4f5311236168a109cb"
                  ]
                }
              },
              "status": "OK",
              "code": 200,
              "_postman_previewlanguage": "json",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
              "cookie": [],
              "body": "{\n  \"_id\": \"60d0fe4f5311236168a109cb\",\n  \"title\": \"Grocery Shopping\",\n  \"amount\": 85.50,\n  \"category\": \"food\",\n  \"date\": \"2024-01-15T00:00:00.000Z\",\n  \"description\": \"Weekly groceries\",\n  \"userId\": \"60d0fe4f5311236168a109ca\",\n  \"createdAt\": \"2024-01-15T10:00:00.000Z\",\n  \"updatedAt\": \"2024-01-15T10:00:00.000Z\"\n}"
            }
          ]
        },
        {
          "name": "Create Expense",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 201) {",
                  "    const jsonData = pm.response.json();",
                  "    pm.environment.set(\"expense_id\", jsonData._id);",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{auth_token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"title\": \"Grocery Shopping\",\n  \"amount\": 85.50,\n  \"category\": {\n    \"id\": \"groceries\",\n    \"name\": \"Groceries\",\n    \"color\": \"#4CAF50\",\n    \"icon\": \"shopping-cart\"\n  },\n  \"payee\": {\n    \"id\": \"supermarket\",\n    \"name\": \"Local Supermarket\",\n    \"type\": \"company\"\n  },\n  \"date\": \"2024-01-15T00:00:00.000Z\",\n  \"description\": \"Weekly groceries\",\n  \"tags\": [\n    {\n      \"id\": \"weekly\",\n      \"name\": \"Weekly\",\n      \"color\": \"#2196F3\",\n      \"icon\": \"calendar\"\n    }\n  ]\n}"
            },
            "url": {
              "raw": "{{rootUrl}}/api/expenses",
              "host": [
                "{{rootUrl}}"
              ],
              "path": [
                "api",
                "expenses"
              ]
            },
            "description": "Create a new expense (automatically saves expense ID to environment)"
          },
          "response": [
            {
              "name": "Success",
              "originalRequest": {
                "method": "POST",
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{auth_token}}"
                  },
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"title\": \"Grocery Shopping\",\n  \"amount\": 85.50,\n  \"category\": \"food\",\n  \"date\": \"2024-01-15T00:00:00.000Z\",\n  \"description\": \"Weekly groceries\"\n}"
                },
                "url": {
                  "raw": "{{rootUrl}}/api/expenses",
                  "host": [
                    "{{rootUrl}}"
                  ],
                  "path": [
                    "api",
                    "expenses"
                  ]
                }
              },
              "status": "Created",
              "code": 201,
              "_postman_previewlanguage": "json",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
              "cookie": [],
              "body": "{\n  \"_id\": \"60d0fe4f5311236168a109cb\",\n  \"title\": \"Grocery Shopping\",\n  \"amount\": 85.50,\n  \"category\": \"food\",\n  \"date\": \"2024-01-15T00:00:00.000Z\",\n  \"description\": \"Weekly groceries\",\n  \"userId\": \"60d0fe4f5311236168a109ca\",\n  \"createdAt\": \"2024-01-15T10:00:00.000Z\",\n  \"updatedAt\": \"2024-01-15T10:00:00.000Z\"\n}"
            }
          ]
        },
        {
          "name": "Update Expense",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{auth_token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"title\": \"Updated Grocery Shopping\",\n  \"amount\": 95.75,\n  \"description\": \"Weekly groceries with extra items\"\n}"
            },
            "url": {
              "raw": "{{rootUrl}}/api/expenses/{{expense_id}}",
              "host": [
                "{{rootUrl}}"
              ],
              "path": [
                "api",
                "expenses",
                "{{expense_id}}"
              ]
            },
            "description": "Update an existing expense"
          },
          "response": [
            {
              "name": "Success",
              "originalRequest": {
                "method": "PUT",
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{auth_token}}"
                  },
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"title\": \"Updated Grocery Shopping\",\n  \"amount\": 95.75,\n  \"description\": \"Weekly groceries with extra items\"\n}"
                },
                "url": {
                  "raw": "{{rootUrl}}/api/expenses/60d0fe4f5311236168a109cb",
                  "host": [
                    "{{rootUrl}}"
                  ],
                  "path": [
                    "api",
                    "expenses",
                    "60d0fe4f5311236168a109cb"
                  ]
                }
              },
              "status": "OK",
              "code": 200,
              "_postman_previewlanguage": "json",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
              "cookie": [],
              "body": "{\n  \"_id\": \"60d0fe4f5311236168a109cb\",\n  \"title\": \"Updated Grocery Shopping\",\n  \"amount\": 95.75,\n  \"category\": \"food\",\n  \"date\": \"2024-01-15T00:00:00.000Z\",\n  \"description\": \"Weekly groceries with extra items\",\n  \"userId\": \"60d0fe4f5311236168a109ca\",\n  \"createdAt\": \"2024-01-15T10:00:00.000Z\",\n  \"updatedAt\": \"2024-01-15T10:05:00.000Z\"\n}"
            }
          ]
        },
        {
          "name": "Delete Expense",
          "request": {
            "method": "DELETE",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{auth_token}}"
              }
            ],
            "url": {
              "raw": "{{rootUrl}}/api/expenses/{{expense_id}}",
              "host": [
                "{{rootUrl}}"
              ],
              "path": [
                "api",
                "expenses",
                "{{expense_id}}"
              ]
            },
            "description": "Delete an existing expense"
          },
          "response": [
            {
              "name": "Success",
              "originalRequest": {
                "method": "DELETE",
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{auth_token}}"
                  }
                ],
                "url": {
                  "raw": "{{rootUrl}}/api/expenses/60d0fe4f5311236168a109cb",
                  "host": [
                    "{{rootUrl}}"
                  ],
                  "path": [
                    "api",
                    "expenses",
                    "60d0fe4f5311236168a109cb"
                  ]
                }
              },
              "status": "OK",
              "code": 200,
              "_postman_previewlanguage": "json",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
              "cookie": [],
              "body": "{\n  \"message\": \"Expense deleted successfully\"\n}"
            }
          ]
        }
      ],
      "description": "Complete CRUD operations for expense management with advanced search and filtering capabilities"
    },
    {
      "name": "Import",
      "item": [
        {
          "name": "Import Transactions from Excel",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{auth_token}}"
              }
            ],
            "body": {
              "mode": "formdata",
              "formdata": [
                {
                  "key": "file",
                  "type": "file",
                  "src": "",
                  "description": "Excel file (.xlsx) containing transactions. Supports BBVA 'Últimos movimientos' format or standard format with columns: date, description, amount, currency (optional), type (optional), category (optional), periodicity (optional)"
                }
              ]
            },
            "url": {
              "raw": "{{rootUrl}}/api/import/transactions",
              "host": [
                "{{rootUrl}}"
              ],
              "path": [
                "api",
                "import",
                "transactions"
              ]
            },
            "description": "Import transactions from Excel file. Automatically detects BBVA format or processes standard format. Negative amounts are treated as expenses, positive as income."
          },
          "response": [
            {
              "name": "Success",
              "originalRequest": {
                "method": "POST",
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{auth_token}}"
                  }
                ],
                "body": {
                  "mode": "formdata",
                  "formdata": [
                    {
                      "key": "file",
                      "type": "file",
                      "src": "/path/to/transactions.xlsx"
                    }
                  ]
                },
                "url": {
                  "raw": "{{rootUrl}}/api/import/transactions",
                  "host": [
                    "{{rootUrl}}"
                  ],
                  "path": [
                    "api",
                    "import",
                    "transactions"
                  ]
                }
              },
              "status": "OK",
              "code": 200,
              "_postman_previewlanguage": "json",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
              "cookie": [],
              "body": "{\n  \"total\": 40,\n  \"imported\": 40,\n  \"expenses\": 37,\n  \"income\": 3,\n  \"format\": \"BBVA\",\n  \"errors\": []\n}"
            },
            {
              "name": "Validation Error",
              "originalRequest": {
                "method": "POST",
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{auth_token}}"
                  }
                ],
                "body": {
                  "mode": "formdata",
                  "formdata": [
                    {
                      "key": "file",
                      "type": "file",
                      "src": "/path/to/invalid.xlsx"
                    }
                  ]
                },
                "url": {
                  "raw": "{{rootUrl}}/api/import/transactions",
                  "host": [
                    "{{rootUrl}}"
                  ],
                  "path": [
                    "api",
                    "import",
                    "transactions"
                  ]
                }
              },
              "status": "OK",
              "code": 200,
              "_postman_previewlanguage": "json",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
              "cookie": [],
              "body": "{\n  \"total\": 10,\n  \"imported\": 7,\n  \"expenses\": 5,\n  \"income\": 2,\n  \"format\": \"Standard\",\n  \"errors\": [\n    \"Row 3: Invalid date format\",\n    \"Row 7: Missing required fields (date, description, amount)\",\n    \"Row 10: Validation failed: amount must be a number\"\n  ]\n}"
            },
            {
              "name": "No File Uploaded",
              "originalRequest": {
                "method": "POST",
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{auth_token}}"
                  }
                ],
                "body": {
                  "mode": "formdata",
                  "formdata": []
                },
                "url": {
                  "raw": "{{rootUrl}}/api/import/transactions",
                  "host": [
                    "{{rootUrl}}"
                  ],
                  "path": [
                    "api",
                    "import",
                    "transactions"
                  ]
                }
              },
              "status": "Bad Request",
              "code": 400,
              "_postman_previewlanguage": "json",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
              "cookie": [],
              "body": "{\n  \"error\": \"No file uploaded\"\n}"
            },
            {
              "name": "Unauthorized",
              "originalRequest": {
                "method": "POST",
                "header": [],
                "body": {
                  "mode": "formdata",
                  "formdata": [
                    {
                      "key": "file",
                      "type": "file",
                      "src": "/path/to/transactions.xlsx"
                    }
                  ]
                },
                "url": {
                  "raw": "{{rootUrl}}/api/import/transactions",
                  "host": [
                    "{{rootUrl}}"
                  ],
                  "path": [
                    "api",
                    "import",
                    "transactions"
                  ]
                }
              },
              "status": "Unauthorized",
              "code": 401,
              "_postman_previewlanguage": "json",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
              "cookie": [],
              "body": "{\n  \"error\": \"User not authenticated\"\n}"
            }
          ]
        },
        {
          "name": "Import Categories from JSON",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{auth_token}}"
              }
            ],
            "body": {
              "mode": "formdata",
              "formdata": [
                {
                  "key": "file",
                  "type": "file",
                  "src": "",
                  "description": "JSON file containing categories. Expected format: [{\"key\": \"food_dining\", \"name\": \"Food & Dining\", \"color\": \"#FF6B35\", \"icon\": \"restaurant\", \"keywords\": [\"restaurant\", \"food\", \"dining\"]}]"
                }
              ]
            },
            "url": {
              "raw": "{{rootUrl}}/api/import/categories",
              "host": [
                "{{rootUrl}}"
              ],
              "path": [
                "api",
                "import",
                "categories"
              ]
            },
            "description": "Import categories from JSON file. Categories with existing keys will be replaced. Supports keywords for automatic transaction categorization."
          },
          "response": [
            {
              "name": "Success",
              "originalRequest": {
                "method": "POST",
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{auth_token}}"
                  }
                ],
                "body": {
                  "mode": "formdata",
                  "formdata": [
                    {
                      "key": "file",
                      "type": "file",
                      "src": "/path/to/categories.json"
                    }
                  ]
                },
                "url": {
                  "raw": "{{rootUrl}}/api/import/categories",
                  "host": [
                    "{{rootUrl}}"
                  ],
                  "path": [
                    "api",
                    "import",
                    "categories"
                  ]
                }
              },
              "status": "OK",
              "code": 200,
              "_postman_previewlanguage": "json",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
              "cookie": [],
              "body": "{\n  \"total\": 18,\n  \"imported\": 15,\n  \"updated\": 3,\n  \"errors\": []\n}"
            }
          ]
        },
        {
          "name": "Import Tags from JSON",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{auth_token}}"
              }
            ],
            "body": {
              "mode": "formdata",
              "formdata": [
                {
                  "key": "file",
                  "type": "file",
                  "src": "",
                  "description": "JSON file containing tags. Expected format: [{\"key\": \"urgent\", \"name\": \"Urgent\", \"color\": \"#FF0000\", \"icon\": \"alert\"}]"
                }
              ]
            },
            "url": {
              "raw": "{{rootUrl}}/api/import/tags",
              "host": [
                "{{rootUrl}}"
              ],
              "path": [
                "api",
                "import",
                "tags"
              ]
            },
            "description": "Import tags from JSON file. Tags with existing keys will be replaced. Useful for organizing and filtering transactions."
          },
          "response": [
            {
              "name": "Success",
              "originalRequest": {
                "method": "POST",
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{auth_token}}"
                  }
                ],
                "body": {
                  "mode": "formdata",
                  "formdata": [
                    {
                      "key": "file",
                      "type": "file",
                      "src": "/path/to/tags.json"
                    }
                  ]
                },
                "url": {
                  "raw": "{{rootUrl}}/api/import/tags",
                  "host": [
                    "{{rootUrl}}"
                  ],
                  "path": [
                    "api",
                    "import",
                    "tags"
                  ]
                }
              },
              "status": "OK",
              "code": 200,
              "_postman_previewlanguage": "json",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
              "cookie": [],
              "body": "{\n  \"total\": 18,\n  \"imported\": 16,\n  \"updated\": 2,\n  \"errors\": []\n}"
            }
          ]
        },
        {
          "name": "Import Counterparties from JSON",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{auth_token}}"
              }
            ],
            "body": {
              "mode": "formdata",
              "formdata": [
                {
                  "key": "file",
                  "type": "file",
                  "src": "",
                  "description": "JSON file containing counterparties. Expected format: [{\"key\": \"amazon_es\", \"name\": \"Amazon España\", \"type\": {\"key\": \"company\", \"name\": \"Empresa\"}, \"email\": \"customerservice@amazon.es\", \"notes\": \"Tienda online\"}]"
                }
              ]
            },
            "url": {
              "raw": "{{rootUrl}}/api/import/counterparties",
              "host": [
                "{{rootUrl}}"
              ],
              "path": [
                "api",
                "import",
                "counterparties"
              ]
            },
            "description": "Import counterparties from JSON file. Counterparties with existing keys will be replaced. Useful for managing payees and income sources."
          },
          "response": [
            {
              "name": "Success",
              "originalRequest": {
                "method": "POST",
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{auth_token}}"
                  }
                ],
                "body": {
                  "mode": "formdata",
                  "formdata": [
                    {
                      "key": "file",
                      "type": "file",
                      "src": "/path/to/counterparties.json"
                    }
                  ]
                },
                "url": {
                  "raw": "{{rootUrl}}/api/import/counterparties",
                  "host": [
                    "{{rootUrl}}"
                  ],
                  "path": [
                    "api",
                    "import",
                    "counterparties"
                  ]
                }
              },
              "status": "OK",
              "code": 200,
              "_postman_previewlanguage": "json",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
              "cookie": [],
              "body": "{\n  \"total\": 32,\n  \"imported\": 30,\n  \"updated\": 2,\n  \"errors\": []\n}"
            }
          ]
        },
        {
          "name": "Import Recurring Transactions from JSON",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{auth_token}}"
              }
            ],
            "body": {
              "mode": "formdata",
              "formdata": [
                {
                  "key": "file",
                  "type": "file",
                  "src": "/data/recurringTransactions.json"
                }
              ]
            },
            "url": {
              "raw": "{{rootUrl}}/api/import/recurring-transactions",
              "host": [
                "{{rootUrl}}"
              ],
              "path": [
                "api",
                "import",
                "recurring-transactions"
              ]
            },
            "description": "Import recurring transactions from JSON file. The file should contain an array of recurring transaction objects with title, currency, category, transactionType, periodicity, and optional minAproxAmount/maxAproxAmount."
          },
          "response": [
            {
              "name": "Success",
              "originalRequest": {
                "method": "POST",
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{auth_token}}"
                  }
                ],
                "body": {
                  "mode": "formdata",
                  "formdata": [
                    {
                      "key": "file",
                      "type": "file",
                      "src": "/data/recurringTransactions.json"
                    }
                  ]
                },
                "url": {
                  "raw": "{{rootUrl}}/api/import/recurring-transactions",
                  "host": [
                    "{{rootUrl}}"
                  ],
                  "path": [
                    "api",
                    "import",
                    "recurring-transactions"
                  ]
                }
              },
              "status": "OK",
              "code": 200,
              "_postman_previewlanguage": "json",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
              "cookie": [],
              "body": "{\n  \"total\": 15,\n  \"imported\": 13,\n  \"updated\": 2,\n  \"errors\": []\n}"
            }
          ]
        },
        {
          "name": "Import Crypto Assets from JSON",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{auth_token}}"
              }
            ],
            "body": {
              "mode": "formdata",
              "formdata": [
                {
                  "key": "file",
                  "type": "file",
                  "src": "",
                  "description": "JSON file containing crypto assets array. Each asset should have: name (string), code (string), amount (number, optional)"
                }
              ]
            },
            "url": {
              "raw": "{{rootUrl}}/api/import/crypto-assets",
              "host": [
                "{{rootUrl}}"
              ],
              "path": [
                "api",
                "import",
                "crypto-assets"
              ]
            },
            "description": "Import crypto assets from JSON file. Updates existing assets with matching code or creates new ones."
          },
          "response": [
            {
              "name": "Success",
              "originalRequest": {
                "method": "POST",
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{auth_token}}"
                  }
                ],
                "body": {
                  "mode": "formdata",
                  "formdata": [
                    {
                      "key": "file",
                      "type": "file",
                      "src": "/path/to/cryptoAssets.json"
                    }
                  ]
                },
                "url": {
                  "raw": "{{rootUrl}}/api/import/crypto-assets",
                  "host": [
                    "{{rootUrl}}"
                  ],
                  "path": [
                    "api",
                    "import",
                    "crypto-assets"
                  ]
                }
              },
              "status": "OK",
              "code": 200,
              "_postman_previewlanguage": "json",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
              "cookie": [],
              "body": "{\n  \"total\": 10,\n  \"imported\": 8,\n  \"updated\": 2,\n  \"errors\": []\n}"
            }
          ]
        }
      ],
      "description": "Import data from external files. Supports Excel transactions (BBVA format), JSON categories with smart keywords, JSON tags, JSON counterparties, and JSON recurring transactions. All imports prevent duplicates by replacing existing items with same keys."
    },
    {
      "name": "Incomes",
      "item": [
        {
          "name": "Search Incomes",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{auth_token}}"
              }
            ],
            "url": {
              "raw": "{{rootUrl}}/api/incomes/search?limit=20&offset=0&sortBy=date&sortOrder=desc&dateFrom=2024-01-01&dateTo=2024-12-31",
              "host": [
                "{{rootUrl}}"
              ],
              "path": [
                "api",
                "incomes",
                "search"
              ],
              "query": [
                {
                  "key": "title",
                  "value": "freelance",
                  "description": "Search in income titles (case-insensitive)",
                  "disabled": true
                },
                {
                  "key": "description",
                  "value": "project",
                  "description": "Search in income descriptions (case-insensitive)",
                  "disabled": true
                },
                {
                  "key": "dateFrom",
                  "value": "2024-01-01",
                  "description": "Filter incomes from this date (YYYY-MM-DD)"
                },
                {
                  "key": "dateTo",
                  "value": "2024-12-31",
                  "description": "Filter incomes until this date (YYYY-MM-DD)"
                },
                {
                  "key": "amountMin",
                  "value": "100",
                  "description": "Minimum amount filter",
                  "disabled": true
                },
                {
                  "key": "amountMax",
                  "value": "5000",
                  "description": "Maximum amount filter",
                  "disabled": true
                },
                {
                  "key": "currency",
                  "value": "EUR",
                  "description": "Currency filter (EUR, GBP, USD)",
                  "disabled": true
                },
                {
                  "key": "category",
                  "value": "{{category_id}}",
                  "description": "Category ID filter",
                  "disabled": true
                },
                {
                  "key": "source",
                  "value": "{{counterparty_id}}",
                  "description": "Source/Counterparty ID filter",
                  "disabled": true
                },
                {
                  "key": "periodicity",
                  "value": "NOT_RECURRING",
                  "description": "Periodicity filter",
                  "disabled": true
                },
                {
                  "key": "tags",
                  "value": "project,work",
                  "description": "Tag keys filter (comma-separated, matches any)",
                  "disabled": true
                },
                {
                  "key": "limit",
                  "value": "20",
                  "description": "Number of results to return (1-100, default: 50)"
                },
                {
                  "key": "offset",
                  "value": "0",
                  "description": "Number of results to skip (default: 0)"
                },
                {
                  "key": "sortBy",
                  "value": "date",
                  "description": "Field to sort by (date, amount, title, createdAt)"
                },
                {
                  "key": "sortOrder",
                  "value": "desc",
                  "description": "Sort order (asc, desc)"
                },
                {
                  "key": "includeTotal",
                  "value": "false",
                  "description": "Whether to include total amount in response (true/false, default: false)",
                  "disabled": true
                }
              ]
            },
            "description": "Search and filter incomes with pagination and sorting. All filters are optional and can be combined."
          },
          "response": [
            {
              "name": "Success",
              "originalRequest": {
                "method": "GET",
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{auth_token}}"
                  }
                ],
                "url": {
                  "raw": "{{rootUrl}}/api/incomes/search?title=freelance&amountMin=1000&limit=10",
                  "host": [
                    "{{rootUrl}}"
                  ],
                  "path": [
                    "api",
                    "incomes",
                    "search"
                  ],
                  "query": [
                    {
                      "key": "title",
                      "value": "freelance"
                    },
                    {
                      "key": "amountMin",
                      "value": "1000"
                    },
                    {
                      "key": "limit",
                      "value": "10"
                    }
                  ]
                }
              },
              "status": "OK",
              "code": 200,
              "_postman_previewlanguage": "json",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
              "cookie": [],
              "body": "{\n  \"incomes\": [\n    {\n      \"_id\": \"60d0fe4f5311236168a109ce\",\n      \"title\": \"Ingreso Empresa XYZ\",\n      \"amount\": 2500.00,\n      \"currency\": \"EUR\",\n      \"category\": {\n        \"_id\": \"60d0fe4f5311236168a109cf\",\n        \"key\": \"salary\",\n        \"name\": \"Salary\",\n        \"color\": \"#4CAF50\",\n        \"icon\": \"money\"\n      },\n      \"source\": {\n        \"_id\": \"60d0fe4f5311236168a109d0\",\n        \"key\": \"empresa_xyz\",\n        \"name\": \"Empresa XYZ\",\n        \"type\": \"company\"\n      },\n      \"date\": \"2024-01-30T00:00:00.000Z\",\n      \"periodicity\": \"RECURRING_FIXED_AMOUNT\",\n      \"tags\": [],\n      \"userId\": \"60d0fe4f5311236168a109ca\",\n      \"createdAt\": \"2024-01-30T09:00:00.000Z\",\n      \"updatedAt\": \"2024-01-30T09:00:00.000Z\"\n    }\n  ],\n  \"pagination\": {\n    \"total\": 8,\n    \"limit\": 10,\n    \"offset\": 0,\n    \"hasMore\": false\n  },\n  \"filters\": {\n    \"title\": \"freelance\",\n    \"amountMin\": \"1000\"\n  },\n  \"sort\": {\n    \"sortBy\": \"date\",\n    \"sortOrder\": \"desc\"\n  },\n  \"totalAmount\": 18750.00\n}"
            },
            {
              "name": "Success with Total",
              "originalRequest": {
                "method": "GET",
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{auth_token}}"
                  }
                ],
                "url": {
                  "raw": "{{rootUrl}}/api/incomes/search?title=freelance&includeTotal=true&limit=10",
                  "host": [
                    "{{rootUrl}}"
                  ],
                  "path": [
                    "api",
                    "incomes",
                    "search"
                  ],
                  "query": [
                    {
                      "key": "title",
                      "value": "freelance"
                    },
                    {
                      "key": "includeTotal",
                      "value": "true"
                    },
                    {
                      "key": "limit",
                      "value": "10"
                    }
                  ]
                }
              },
              "status": "OK",
              "code": 200,
              "_postman_previewlanguage": "json",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
              "cookie": [],
              "body": "{\n  \"incomes\": [\n    {\n      \"_id\": \"60d0fe4f5311236168a109ce\",\n      \"title\": \"Freelance Project Q1\",\n      \"amount\": 2500.00,\n      \"currency\": \"EUR\",\n      \"category\": {\n        \"_id\": \"60d0fe4f5311236168a109cf\",\n        \"key\": \"freelance\",\n        \"name\": \"Freelance Work\",\n        \"color\": \"#4CAF50\",\n        \"icon\": \"briefcase\"\n      },\n      \"source\": {\n        \"_id\": \"60d0fe4f5311236168a109d0\",\n        \"key\": \"client_abc\",\n        \"name\": \"ABC Company\",\n        \"type\": \"company\"\n      },\n      \"date\": \"2024-03-15T00:00:00.000Z\",\n      \"periodicity\": \"NOT_RECURRING\",\n      \"tags\": [],\n      \"userId\": \"60d0fe4f5311236168a109ca\",\n      \"createdAt\": \"2024-03-15T09:00:00.000Z\",\n      \"updatedAt\": \"2024-03-15T09:00:00.000Z\"\n    }\n  ],\n  \"pagination\": {\n    \"total\": 5,\n    \"limit\": 10,\n    \"offset\": 0,\n    \"hasMore\": false\n  },\n  \"filters\": {\n    \"title\": \"freelance\"\n  },\n  \"sort\": {\n    \"sortBy\": \"date\",\n    \"sortOrder\": \"desc\"\n  },\n  \"totalAmount\": 8750.00\n}"
            }
          ]
        },
        {
          "name": "Create Income",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 201) {",
                  "    const jsonData = pm.response.json();",
                  "    pm.environment.set(\"income_id\", jsonData._id);",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{auth_token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"title\": \"Freelance Project\",\n  \"amount\": 1500.00,\n  \"category\": {\n    \"id\": \"freelance\",\n    \"name\": \"Freelance Work\",\n    \"color\": \"#4CAF50\",\n    \"icon\": \"briefcase\"\n  },\n  \"source\": {\n    \"id\": \"client-abc\",\n    \"name\": \"ABC Company\",\n    \"type\": \"company\",\n    \"email\": \"projects@abc.com\"\n  },\n  \"date\": \"2024-01-15T00:00:00.000Z\",\n  \"description\": \"Web development project\",\n  \"tags\": [\n    {\n      \"id\": \"project\",\n      \"name\": \"Project Work\",\n      \"color\": \"#FF9800\",\n      \"icon\": \"code\"\n    }\n  ]\n}"
            },
            "url": {
              "raw": "{{rootUrl}}/api/incomes",
              "host": [
                "{{rootUrl}}"
              ],
              "path": [
                "api",
                "incomes"
              ]
            },
            "description": "Create a new income"
          }
        },
        {
          "name": "Update Income",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{auth_token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"title\": \"Updated Freelance Project\",\n  \"amount\": 1750.00,\n  \"description\": \"Extended web development project\"\n}"
            },
            "url": {
              "raw": "{{rootUrl}}/api/incomes/{{income_id}}",
              "host": [
                "{{rootUrl}}"
              ],
              "path": [
                "api",
                "incomes",
                "{{income_id}}"
              ]
            },
            "description": "Update an existing income"
          }
        },
        {
          "name": "Delete Income",
          "request": {
            "method": "DELETE",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{auth_token}}"
              }
            ],
            "url": {
              "raw": "{{rootUrl}}/api/incomes/{{income_id}}",
              "host": [
                "{{rootUrl}}"
              ],
              "path": [
                "api",
                "incomes",
                "{{income_id}}"
              ]
            },
            "description": "Delete an existing income"
          }
        }
      ],
      "description": "Complete CRUD operations for income tracking with advanced search and filtering capabilities"
    },
    {
      "name": "Recurring Transactions",
      "item": [
        {
          "name": "Search Recurring Transactions",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{auth_token}}"
              }
            ],
            "url": {
              "raw": "{{rootUrl}}/api/recurring-transactions/search?limit=20&offset=0&sortBy=createdAt&sortOrder=desc&transactionType=EXPENSE&periodicity=MONTHLY",
              "host": [
                "{{rootUrl}}"
              ],
              "path": [
                "api",
                "recurring-transactions",
                "search"
              ],
              "query": [
                {
                  "key": "title",
                  "value": "Alquiler",
                  "disabled": true,
                  "description": "Search by title (case-insensitive)"
                },
                {
                  "key": "currency",
                  "value": "EUR",
                  "disabled": true,
                  "description": "Filter by currency"
                },
                {
                  "key": "category",
                  "value": "{{category_id}}",
                  "disabled": true,
                  "description": "Filter by category ID"
                },
                {
                  "key": "transactionType",
                  "value": "EXPENSE",
                  "description": "Filter by transaction type"
                },
                {
                  "key": "periodicity",
                  "value": "MONTHLY",
                  "description": "Filter by periodicity"
                },
                {
                  "key": "limit",
                  "value": "20",
                  "description": "Number of results"
                },
                {
                  "key": "offset",
                  "value": "0",
                  "description": "Results offset"
                },
                {
                  "key": "sortBy",
                  "value": "createdAt",
                  "description": "Sort field"
                },
                {
                  "key": "sortOrder",
                  "value": "desc",
                  "description": "Sort order"
                }
              ]
            },
            "description": "Search and filter recurring transactions with pagination"
          },
          "response": [
            {
              "name": "Success",
              "originalRequest": {
                "method": "GET",
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{auth_token}}"
                  }
                ],
                "url": {
                  "raw": "{{rootUrl}}/api/recurring-transactions/search?limit=20&offset=0&sortBy=createdAt&sortOrder=desc",
                  "host": [
                    "{{rootUrl}}"
                  ],
                  "path": [
                    "api",
                    "recurring-transactions",
                    "search"
                  ],
                  "query": [
                    {
                      "key": "limit",
                      "value": "20"
                    },
                    {
                      "key": "offset",
                      "value": "0"
                    },
                    {
                      "key": "sortBy",
                      "value": "createdAt"
                    },
                    {
                      "key": "sortOrder",
                      "value": "desc"
                    }
                  ]
                }
              },
              "status": "OK",
              "code": 200,
              "_postman_previewlanguage": "json",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
              "cookie": [],
              "body": "{\n  \"recurringTransactions\": [\n    {\n      \"id\": \"674a1b2c3d4e5f6789abcdef\",\n      \"title\": \"Alquiler\",\n      \"currency\": \"EUR\",\n      \"category\": {\n        \"id\": \"674a1b2c3d4e5f6789abcd01\",\n        \"key\": \"vivienda\",\n        \"name\": \"Vivienda\",\n        \"color\": \"#8B5CF6\",\n        \"icon\": \"home\"\n      },\n      \"transactionType\": \"EXPENSE\",\n      \"minAproxAmount\": 800,\n      \"maxAproxAmount\": 1200,\n      \"periodicity\": \"MONTHLY\",\n      \"createdAt\": \"2024-01-15T10:00:00.000Z\",\n      \"updatedAt\": \"2024-01-15T10:00:00.000Z\"\n    }\n  ],\n  \"pagination\": {\n    \"total\": 15,\n    \"limit\": 20,\n    \"offset\": 0,\n    \"hasMore\": false\n  },\n  \"filters\": {\n    \"transactionType\": \"EXPENSE\",\n    \"periodicity\": \"MONTHLY\"\n  },\n  \"sort\": {\n    \"sortBy\": \"createdAt\",\n    \"sortOrder\": \"desc\"\n  }\n}"
            }
          ]
        },
        {
          "name": "Get Recurring Transaction by ID",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{auth_token}}"
              }
            ],
            "url": {
              "raw": "{{rootUrl}}/api/recurring-transactions/{{recurring_transaction_id}}",
              "host": [
                "{{rootUrl}}"
              ],
              "path": [
                "api",
                "recurring-transactions",
                "{{recurring_transaction_id}}"
              ]
            },
            "description": "Get a specific recurring transaction by ID"
          },
          "response": [
            {
              "name": "Success",
              "originalRequest": {
                "method": "GET",
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{auth_token}}"
                  }
                ],
                "url": {
                  "raw": "{{rootUrl}}/api/recurring-transactions/674a1b2c3d4e5f6789abcdef",
                  "host": [
                    "{{rootUrl}}"
                  ],
                  "path": [
                    "api",
                    "recurring-transactions",
                    "674a1b2c3d4e5f6789abcdef"
                  ]
                }
              },
              "status": "OK",
              "code": 200,
              "_postman_previewlanguage": "json",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
              "cookie": [],
              "body": "{\n  \"id\": \"674a1b2c3d4e5f6789abcdef\",\n  \"title\": \"Alquiler\",\n  \"currency\": \"EUR\",\n  \"category\": {\n    \"id\": \"674a1b2c3d4e5f6789abcd01\",\n    \"key\": \"vivienda\",\n    \"name\": \"Vivienda\",\n    \"color\": \"#8B5CF6\",\n    \"icon\": \"home\"\n  },\n  \"transactionType\": \"EXPENSE\",\n  \"minAproxAmount\": 800,\n  \"maxAproxAmount\": 1200,\n  \"periodicity\": \"MONTHLY\",\n  \"createdAt\": \"2024-01-15T10:00:00.000Z\",\n  \"updatedAt\": \"2024-01-15T10:00:00.000Z\"\n}"
            }
          ]
        },
        {
          "name": "Create Recurring Transaction",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{auth_token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"title\": \"Seguro del coche\",\n  \"currency\": \"EUR\",\n  \"category\": \"{{category_id}}\",\n  \"transactionType\": \"EXPENSE\",\n  \"minAproxAmount\": 150,\n  \"maxAproxAmount\": 300,\n  \"periodicity\": \"QUARTERLY\"\n}"
            },
            "url": {
              "raw": "{{rootUrl}}/api/recurring-transactions",
              "host": [
                "{{rootUrl}}"
              ],
              "path": [
                "api",
                "recurring-transactions"
              ]
            },
            "description": "Create a new recurring transaction"
          },
          "response": [
            {
              "name": "Success",
              "originalRequest": {
                "method": "POST",
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{auth_token}}"
                  },
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"title\": \"Seguro del coche\",\n  \"currency\": \"EUR\",\n  \"category\": \"674a1b2c3d4e5f6789abcd01\",\n  \"transactionType\": \"EXPENSE\",\n  \"minAproxAmount\": 150,\n  \"maxAproxAmount\": 300,\n  \"periodicity\": \"QUARTERLY\"\n}"
                },
                "url": {
                  "raw": "{{rootUrl}}/api/recurring-transactions",
                  "host": [
                    "{{rootUrl}}"
                  ],
                  "path": [
                    "api",
                    "recurring-transactions"
                  ]
                }
              },
              "status": "Created",
              "code": 201,
              "_postman_previewlanguage": "json",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
              "cookie": [],
              "body": "{\n  \"id\": \"674a1b2c3d4e5f6789abcde0\",\n  \"title\": \"Seguro del coche\",\n  \"currency\": \"EUR\",\n  \"category\": {\n    \"id\": \"674a1b2c3d4e5f6789abcd01\",\n    \"key\": \"transporte\",\n    \"name\": \"Transporte\",\n    \"color\": \"#4ECDC4\",\n    \"icon\": \"car\"\n  },\n  \"transactionType\": \"EXPENSE\",\n  \"minAproxAmount\": 150,\n  \"maxAproxAmount\": 300,\n  \"periodicity\": \"QUARTERLY\",\n  \"createdAt\": \"2024-01-15T10:30:00.000Z\",\n  \"updatedAt\": \"2024-01-15T10:30:00.000Z\"\n}"
            }
          ]
        },
        {
          "name": "Update Recurring Transaction",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{auth_token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"title\": \"Seguro del coche actualizado\",\n  \"minAproxAmount\": 160,\n  \"maxAproxAmount\": 320\n}"
            },
            "url": {
              "raw": "{{rootUrl}}/api/recurring-transactions/{{recurring_transaction_id}}",
              "host": [
                "{{rootUrl}}"
              ],
              "path": [
                "api",
                "recurring-transactions",
                "{{recurring_transaction_id}}"
              ]
            },
            "description": "Update an existing recurring transaction"
          },
          "response": [
            {
              "name": "Success",
              "originalRequest": {
                "method": "PUT",
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{auth_token}}"
                  },
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"title\": \"Seguro del coche actualizado\",\n  \"minAproxAmount\": 160,\n  \"maxAproxAmount\": 320\n}"
                },
                "url": {
                  "raw": "{{rootUrl}}/api/recurring-transactions/674a1b2c3d4e5f6789abcde0",
                  "host": [
                    "{{rootUrl}}"
                  ],
                  "path": [
                    "api",
                    "recurring-transactions",
                    "674a1b2c3d4e5f6789abcde0"
                  ]
                }
              },
              "status": "OK",
              "code": 200,
              "_postman_previewlanguage": "json",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
              "cookie": [],
              "body": "{\n  \"id\": \"674a1b2c3d4e5f6789abcde0\",\n  \"title\": \"Seguro del coche actualizado\",\n  \"currency\": \"EUR\",\n  \"category\": {\n    \"id\": \"674a1b2c3d4e5f6789abcd01\",\n    \"key\": \"transporte\",\n    \"name\": \"Transporte\",\n    \"color\": \"#4ECDC4\",\n    \"icon\": \"car\"\n  },\n  \"transactionType\": \"EXPENSE\",\n  \"minAproxAmount\": 160,\n  \"maxAproxAmount\": 320,\n  \"periodicity\": \"QUARTERLY\",\n  \"createdAt\": \"2024-01-15T10:30:00.000Z\",\n  \"updatedAt\": \"2024-01-15T11:00:00.000Z\"\n}"
            }
          ]
        },
        {
          "name": "Delete Recurring Transaction",
          "request": {
            "method": "DELETE",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{auth_token}}"
              }
            ],
            "url": {
              "raw": "{{rootUrl}}/api/recurring-transactions/{{recurring_transaction_id}}",
              "host": [
                "{{rootUrl}}"
              ],
              "path": [
                "api",
                "recurring-transactions",
                "{{recurring_transaction_id}}"
              ]
            },
            "description": "Delete an existing recurring transaction"
          },
          "response": [
            {
              "name": "Success",
              "originalRequest": {
                "method": "DELETE",
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{auth_token}}"
                  }
                ],
                "url": {
                  "raw": "{{rootUrl}}/api/recurring-transactions/674a1b2c3d4e5f6789abcde0",
                  "host": [
                    "{{rootUrl}}"
                  ],
                  "path": [
                    "api",
                    "recurring-transactions",
                    "674a1b2c3d4e5f6789abcde0"
                  ]
                }
              },
              "status": "OK",
              "code": 200,
              "_postman_previewlanguage": "json",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
              "cookie": [],
              "body": "{\n  \"message\": \"Recurring transaction deleted successfully\"\n}"
            }
          ]
        }
      ],
      "description": "Complete CRUD operations for recurring transactions with search and filtering capabilities. Manage templates for recurring expenses and income."
    },
    {
      "name": "Categories",
      "item": [
        {
          "name": "Get All Categories",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{auth_token}}"
              }
            ],
            "url": {
              "raw": "{{rootUrl}}/api/categories",
              "host": [
                "{{rootUrl}}"
              ],
              "path": [
                "api",
                "categories"
              ]
            },
            "description": "Retrieve all categories for the authenticated user"
          }
        },
        {
          "name": "Create Category",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 201) {",
                  "    const jsonData = pm.response.json();",
                  "    pm.environment.set(\"category_id\", jsonData.id);",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{auth_token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"id\": \"groceries\",\n  \"name\": \"Groceries\",\n  \"color\": \"#4CAF50\",\n  \"icon\": \"shopping-cart\"\n}"
            },
            "url": {
              "raw": "{{rootUrl}}/api/categories",
              "host": [
                "{{rootUrl}}"
              ],
              "path": [
                "api",
                "categories"
              ]
            },
            "description": "Create a new category"
          }
        },
        {
          "name": "Update Category",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{auth_token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Updated Groceries\",\n  \"color\": \"#2196F3\"\n}"
            },
            "url": {
              "raw": "{{rootUrl}}/api/categories/{{category_id}}",
              "host": [
                "{{rootUrl}}"
              ],
              "path": [
                "api",
                "categories",
                "{{category_id}}"
              ]
            },
            "description": "Update an existing category"
          }
        },
        {
          "name": "Delete Category",
          "request": {
            "method": "DELETE",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{auth_token}}"
              }
            ],
            "url": {
              "raw": "{{rootUrl}}/api/categories/{{category_id}}",
              "host": [
                "{{rootUrl}}"
              ],
              "path": [
                "api",
                "categories",
                "{{category_id}}"
              ]
            },
            "description": "Delete an existing category"
          }
        }
      ],
      "description": "Complete CRUD operations for category management"
    },
    {
      "name": "Tags",
      "item": [
        {
          "name": "Get All Tags",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{auth_token}}"
              }
            ],
            "url": {
              "raw": "{{rootUrl}}/api/tags",
              "host": [
                "{{rootUrl}}"
              ],
              "path": [
                "api",
                "tags"
              ]
            },
            "description": "Retrieve all tags for the authenticated user"
          }
        },
        {
          "name": "Create Tag",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 201) {",
                  "    const jsonData = pm.response.json();",
                  "    pm.environment.set(\"tag_id\", jsonData.id);",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{auth_token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"id\": \"vacation\",\n  \"name\": \"Vacation\",\n  \"color\": \"#FF9800\",\n  \"icon\": \"plane\"\n}"
            },
            "url": {
              "raw": "{{rootUrl}}/api/tags",
              "host": [
                "{{rootUrl}}"
              ],
              "path": [
                "api",
                "tags"
              ]
            },
            "description": "Create a new tag"
          }
        }
      ],
      "description": "CRUD operations for tag management"
    },
    {
      "name": "Counterparties",
      "item": [
        {
          "name": "Search Counterparties",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{auth_token}}"
              }
            ],
            "url": {
              "raw": "{{rootUrl}}/api/counterparties/search?limit=20&offset=0&sortBy=name&sortOrder=asc",
              "host": [
                "{{rootUrl}}"
              ],
              "path": [
                "api",
                "counterparties",
                "search"
              ],
              "query": [
                {
                  "key": "name",
                  "value": "amazon",
                  "description": "Search in counterparty names (case-insensitive)",
                  "disabled": true
                },
                {
                  "key": "type",
                  "value": "company",
                  "description": "Filter by counterparty type (company, person, institution, other)",
                  "disabled": true
                },
                {
                  "key": "email",
                  "value": "support",
                  "description": "Search in email addresses (case-insensitive)",
                  "disabled": true
                },
                {
                  "key": "phone",
                  "value": "+1",
                  "description": "Search in phone numbers (case-insensitive)",
                  "disabled": true
                },
                {
                  "key": "address",
                  "value": "madrid",
                  "description": "Search in addresses (case-insensitive)",
                  "disabled": true
                },
                {
                  "key": "notes",
                  "value": "online",
                  "description": "Search in notes (case-insensitive)",
                  "disabled": true
                },
                {
                  "key": "titleTemplate",
                  "value": "compra",
                  "description": "Search in title templates (case-insensitive)",
                  "disabled": true
                },
                {
                  "key": "limit",
                  "value": "20",
                  "description": "Number of results to return (1-100, default: 50)"
                },
                {
                  "key": "offset",
                  "value": "0",
                  "description": "Number of results to skip (default: 0)"
                },
                {
                  "key": "sortBy",
                  "value": "name",
                  "description": "Field to sort by (name, type, key, createdAt, updatedAt)"
                },
                {
                  "key": "sortOrder",
                  "value": "asc",
                  "description": "Sort order (asc, desc)"
                }
              ]
            },
            "description": "Search and filter counterparties with pagination and sorting. All filters are optional and can be combined."
          },
          "response": [
            {
              "name": "Success",
              "originalRequest": {
                "method": "GET",
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{auth_token}}"
                  }
                ],
                "url": {
                  "raw": "{{rootUrl}}/api/counterparties/search?name=amazon&type=company&limit=10",
                  "host": [
                    "{{rootUrl}}"
                  ],
                  "path": [
                    "api",
                    "counterparties",
                    "search"
                  ],
                  "query": [
                    {
                      "key": "name",
                      "value": "amazon"
                    },
                    {
                      "key": "type",
                      "value": "company"
                    },
                    {
                      "key": "limit",
                      "value": "10"
                    }
                  ]
                }
              },
              "status": "OK",
              "code": 200,
              "_postman_previewlanguage": "json",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
              "cookie": [],
              "body": "{\n  \"counterparties\": [\n    {\n      \"_id\": \"60d0fe4f5311236168a109cd\",\n      \"key\": \"amazon\",\n      \"name\": \"Amazon\",\n      \"type\": \"company\",\n      \"titleTemplate\": \"Compra en {name}\",\n      \"email\": \"support@amazon.com\",\n      \"notes\": \"Online shopping platform\",\n      \"userId\": \"60d0fe4f5311236168a109ca\",\n      \"createdAt\": \"2024-01-15T10:00:00.000Z\",\n      \"updatedAt\": \"2024-01-15T10:00:00.000Z\"\n    }\n  ],\n  \"pagination\": {\n    \"total\": 1,\n    \"limit\": 10,\n    \"offset\": 0,\n    \"hasMore\": false\n  },\n  \"filters\": {\n    \"name\": \"amazon\",\n    \"type\": \"company\"\n  },\n  \"sort\": {\n    \"sortBy\": \"name\",\n    \"sortOrder\": \"asc\"\n  }\n}"
            }
          ]
        },
        {
          "name": "Get Counterparty by ID",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{auth_token}}"
              }
            ],
            "url": {
              "raw": "{{rootUrl}}/api/counterparties/{{counterparty_key}}",
              "host": [
                "{{rootUrl}}"
              ],
              "path": [
                "api",
                "counterparties",
                "{{counterparty_key}}"
              ]
            },
            "description": "Retrieve a specific counterparty by its key/ID"
          },
          "response": [
            {
              "name": "Success",
              "originalRequest": {
                "method": "GET",
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{auth_token}}"
                  }
                ],
                "url": {
                  "raw": "{{rootUrl}}/api/counterparties/amazon",
                  "host": [
                    "{{rootUrl}}"
                  ],
                  "path": [
                    "api",
                    "counterparties",
                    "amazon"
                  ]
                }
              },
              "status": "OK",
              "code": 200,
              "_postman_previewlanguage": "json",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
              "cookie": [],
              "body": "{\n  \"_id\": \"60d0fe4f5311236168a109cd\",\n  \"key\": \"amazon\",\n  \"name\": \"Amazon\",\n  \"type\": \"company\",\n  \"titleTemplate\": \"Compra en {name}\",\n  \"email\": \"support@amazon.com\",\n  \"notes\": \"Online shopping platform\",\n  \"userId\": \"60d0fe4f5311236168a109ca\",\n  \"createdAt\": \"2024-01-15T10:00:00.000Z\",\n  \"updatedAt\": \"2024-01-15T10:00:00.000Z\"\n}"
            }
          ]
        },
        {
          "name": "Create Counterparty",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 201) {",
                  "    const jsonData = pm.response.json();",
                  "    pm.environment.set(\"counterparty_id\", jsonData.id);",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{auth_token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"id\": \"amazon\",\n  \"name\": \"Amazon\",\n  \"type\": \"company\",\n  \"email\": \"support@amazon.com\",\n  \"notes\": \"Online shopping\"\n}"
            },
            "url": {
              "raw": "{{rootUrl}}/api/counterparties",
              "host": [
                "{{rootUrl}}"
              ],
              "path": [
                "api",
                "counterparties"
              ]
            },
            "description": "Create a new counterparty"
          }
        },
        {
          "name": "Update Counterparty",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{auth_token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Updated Amazon\",\n  \"email\": \"updated@amazon.com\",\n  \"phone\": \"+1-800-123-4567\",\n  \"titleTemplate\": \"Compra actualizada en {name}\"\n}"
            },
            "url": {
              "raw": "{{rootUrl}}/api/counterparties/{{counterparty_key}}",
              "host": [
                "{{rootUrl}}"
              ],
              "path": [
                "api",
                "counterparties",
                "{{counterparty_key}}"
              ]
            },
            "description": "Update an existing counterparty by its key/ID"
          },
          "response": [
            {
              "name": "Success",
              "originalRequest": {
                "method": "PUT",
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{auth_token}}"
                  },
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"name\": \"Updated Amazon\",\n  \"email\": \"updated@amazon.com\"\n}"
                },
                "url": {
                  "raw": "{{rootUrl}}/api/counterparties/amazon",
                  "host": [
                    "{{rootUrl}}"
                  ],
                  "path": [
                    "api",
                    "counterparties",
                    "amazon"
                  ]
                }
              },
              "status": "OK",
              "code": 200,
              "_postman_previewlanguage": "json",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
              "cookie": [],
              "body": "{\n  \"_id\": \"60d0fe4f5311236168a109cd\",\n  \"key\": \"amazon\",\n  \"name\": \"Updated Amazon\",\n  \"type\": \"company\",\n  \"titleTemplate\": \"Compra actualizada en {name}\",\n  \"email\": \"updated@amazon.com\",\n  \"notes\": \"Online shopping platform\",\n  \"userId\": \"60d0fe4f5311236168a109ca\",\n  \"createdAt\": \"2024-01-15T10:00:00.000Z\",\n  \"updatedAt\": \"2024-01-15T12:00:00.000Z\"\n}"
            }
          ]
        },
        {
          "name": "Delete Counterparty",
          "request": {
            "method": "DELETE",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{auth_token}}"
              }
            ],
            "url": {
              "raw": "{{rootUrl}}/api/counterparties/{{counterparty_key}}",
              "host": [
                "{{rootUrl}}"
              ],
              "path": [
                "api",
                "counterparties",
                "{{counterparty_key}}"
              ]
            },
            "description": "Delete a counterparty by its key/ID"
          },
          "response": [
            {
              "name": "Success",
              "originalRequest": {
                "method": "DELETE",
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{auth_token}}"
                  }
                ],
                "url": {
                  "raw": "{{rootUrl}}/api/counterparties/amazon",
                  "host": [
                    "{{rootUrl}}"
                  ],
                  "path": [
                    "api",
                    "counterparties",
                    "amazon"
                  ]
                }
              },
              "status": "OK",
              "code": 200,
              "_postman_previewlanguage": "json",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
              "cookie": [],
              "body": "{\n  \"message\": \"Counterparty deleted successfully\"\n}"
            }
          ]
        }
      ],
      "description": "CRUD operations for counterparty management with advanced search and filtering (payees and income sources)"
    },
    {
      "name": "Products",
      "item": [
        {
          "name": "Get User Products",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{auth_token}}"
              }
            ],
            "url": {
              "raw": "{{rootUrl}}/api/products",
              "host": [
                "{{rootUrl}}"
              ],
              "path": [
                "api",
                "products"
              ],
              "query": [
                {
                  "key": "compare",
                  "value": "1d",
                  "description": "Compare with snapshot from specified period ago (1d, 7d, 1m, 3m, 1y)",
                  "disabled": true
                }
              ]
            },
            "description": "Retrieve all financial products (deposits, cash accounts, indexed funds) for the authenticated user from the MI service. Optionally compare with previous snapshots using the 'compare' query parameter."
          },
          "response": [
            {
              "name": "Success",
              "originalRequest": {
                "method": "GET",
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{auth_token}}"
                  }
                ],
                "url": {
                  "raw": "{{rootUrl}}/api/products",
                  "host": [
                    "{{rootUrl}}"
                  ],
                  "path": [
                    "api",
                    "products"
                  ]
                }
              },
              "status": "OK",
              "code": 200,
              "_postman_previewlanguage": "json",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
              "cookie": [],
              "body": "{\n  \"totalValue\": 30000,\n  \"items\": {\n    \"deposits\": {\n      \"items\": [\n        {\n          \"depositId\": \"dep_123\",\n          \"amount\": 10000,\n          \"currency\": \"EUR\",\n          \"interestRate\": 2.5,\n          \"maturityDate\": \"2025-12-31\"\n        }\n      ],\n      \"value\": 10000,\n      \"percentage\": 33.3\n    },\n    \"bankAccounts\": {\n      \"items\": [\n        {\n          \"accountId\": \"acc_456\",\n          \"source\": \"myinvestor\",\n          \"bankName\": \"MyInvestor\",\n          \"bankId\": \"myinvestor\",\n          \"displayName\": \"Main Account\",\n          \"balance\": 5000,\n          \"currency\": \"EUR\",\n          \"accountType\": \"CASH\"\n        },\n        {\n          \"accountId\": \"acc_789\",\n          \"source\": \"truelayer\",\n          \"bankName\": \"Santander\",\n          \"bankId\": \"santander\",\n          \"displayName\": \"Santander Checking\",\n          \"iban\": \"ES1234567890\",\n          \"balance\": 3000,\n          \"currency\": \"EUR\",\n          \"accountType\": \"TRANSACTION\"\n        }\n      ],\n      \"value\": 8000,\n      \"percentage\": 26.7\n    },\n    \"funds\": {\n      \"items\": [\n        {\n          \"isin\": \"IE00B4L5Y983\",\n          \"investmentName\": \"Global Index Fund\",\n          \"marketValue\": 12000,\n          \"currency\": \"EUR\"\n        }\n      ],\n      \"value\": 12000,\n      \"percentage\": 40\n    },\n    \"etcs\": {\n      \"items\": [],\n      \"value\": 0,\n      \"percentage\": 0\n    },\n    \"cryptoAssets\": {\n      \"items\": [],\n      \"value\": 0,\n      \"percentage\": 0\n    }\n  }\n}"
            }
          ]
        },
        {
          "name": "Create Daily Snapshot",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{auth_token}}"
              }
            ],
            "url": {
              "raw": "{{rootUrl}}/api/products/snapshot",
              "host": [
                "{{rootUrl}}"
              ],
              "path": [
                "api",
                "products",
                "snapshot"
              ]
            },
            "description": "Create or update a daily snapshot of user's products. Only one snapshot per day is stored."
          },
          "response": [
            {
              "name": "Success",
              "originalRequest": {
                "method": "POST",
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{auth_token}}"
                  }
                ],
                "url": {
                  "raw": "{{rootUrl}}/api/products/snapshot",
                  "host": [
                    "{{rootUrl}}"
                  ],
                  "path": [
                    "api",
                    "products",
                    "snapshot"
                  ]
                }
              },
              "status": "OK",
              "code": 200,
              "_postman_previewlanguage": "json",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
              "cookie": [],
              "body": "{\n  \"message\": \"Snapshot saved successfully\",\n  \"snapshot\": {\n    \"totalValue\": 50000,\n    \"items\": {\n      \"bankAccounts\": {\n        \"items\": [],\n        \"value\": 5000,\n        \"percentage\": 10\n      },\n      \"deposits\": {\n        \"items\": [],\n        \"value\": 10000,\n        \"percentage\": 20\n      },\n      \"funds\": {\n        \"items\": [],\n        \"value\": 30000,\n        \"percentage\": 60\n      },\n      \"etcs\": {\n        \"items\": [],\n        \"value\": 5000,\n        \"percentage\": 10\n      },\n      \"cryptoAssets\": {\n        \"items\": [],\n        \"value\": 0,\n        \"percentage\": 0\n      }\n    }\n  }\n}"
            }
          ]
        },
        {
          "name": "Get Snapshot History",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{auth_token}}"
              }
            ],
            "url": {
              "raw": "{{rootUrl}}/api/products/snapshots?startDate=2025-01-01&endDate=2025-12-31",
              "host": [
                "{{rootUrl}}"
              ],
              "path": [
                "api",
                "products",
                "snapshots"
              ],
              "query": [
                {
                  "key": "startDate",
                  "value": "2025-01-01",
                  "description": "Start date (YYYY-MM-DD)"
                },
                {
                  "key": "endDate",
                  "value": "2025-12-31",
                  "description": "End date (YYYY-MM-DD)"
                }
              ]
            },
            "description": "Retrieve historical snapshots of user products within a date range"
          },
          "response": [
            {
              "name": "Success",
              "originalRequest": {
                "method": "GET",
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{auth_token}}"
                  }
                ],
                "url": {
                  "raw": "{{rootUrl}}/api/products/snapshots?startDate=2025-01-01&endDate=2025-12-31",
                  "host": [
                    "{{rootUrl}}"
                  ],
                  "path": [
                    "api",
                    "products",
                    "snapshots"
                  ],
                  "query": [
                    {
                      "key": "startDate",
                      "value": "2025-01-01"
                    },
                    {
                      "key": "endDate",
                      "value": "2025-12-31"
                    }
                  ]
                }
              },
              "status": "OK",
              "code": 200,
              "_postman_previewlanguage": "json",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
              "cookie": [],
              "body": "[\n  {\n    \"_id\": \"snapshot_id_1\",\n    \"userId\": \"user_id\",\n    \"date\": \"2025-10-10T00:00:00.000Z\",\n    \"snapshot\": {\n      \"totalValue\": 50000,\n      \"items\": {}\n    },\n    \"createdAt\": \"2025-10-10T12:00:00.000Z\"\n  }\n]"
            }
          ]
        },
        {
          "name": "Get Latest Snapshot",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{auth_token}}"
              }
            ],
            "url": {
              "raw": "{{rootUrl}}/api/products/snapshot/latest",
              "host": [
                "{{rootUrl}}"
              ],
              "path": [
                "api",
                "products",
                "snapshot",
                "latest"
              ]
            },
            "description": "Retrieve the most recent product snapshot for the authenticated user"
          },
          "response": [
            {
              "name": "Success",
              "originalRequest": {
                "method": "GET",
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{auth_token}}"
                  }
                ],
                "url": {
                  "raw": "{{rootUrl}}/api/products/snapshot/latest",
                  "host": [
                    "{{rootUrl}}"
                  ],
                  "path": [
                    "api",
                    "products",
                    "snapshot",
                    "latest"
                  ]
                }
              },
              "status": "OK",
              "code": 200,
              "_postman_previewlanguage": "json",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
              "cookie": [],
              "body": "{\n  \"_id\": \"snapshot_id\",\n  \"userId\": \"user_id\",\n  \"date\": \"2025-10-10T00:00:00.000Z\",\n  \"snapshot\": {\n    \"totalValue\": 50000,\n    \"items\": {}\n  },\n  \"createdAt\": \"2025-10-10T12:00:00.000Z\"\n}"
            }
          ]
        },
        {
          "name": "Get Snapshot by Date",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{auth_token}}"
              }
            ],
            "url": {
              "raw": "{{rootUrl}}/api/products/snapshot/date?date=2025-10-10",
              "host": [
                "{{rootUrl}}"
              ],
              "path": [
                "api",
                "products",
                "snapshot",
                "date"
              ],
              "query": [
                {
                  "key": "date",
                  "value": "2025-10-10",
                  "description": "Date (YYYY-MM-DD)"
                }
              ]
            },
            "description": "Retrieve the product snapshot for a specific date"
          },
          "response": [
            {
              "name": "Success",
              "originalRequest": {
                "method": "GET",
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{auth_token}}"
                  }
                ],
                "url": {
                  "raw": "{{rootUrl}}/api/products/snapshot/date?date=2025-10-10",
                  "host": [
                    "{{rootUrl}}"
                  ],
                  "path": [
                    "api",
                    "products",
                    "snapshot",
                    "date"
                  ],
                  "query": [
                    {
                      "key": "date",
                      "value": "2025-10-10"
                    }
                  ]
                }
              },
              "status": "OK",
              "code": 200,
              "_postman_previewlanguage": "json",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
              "cookie": [],
              "body": "{\n  \"_id\": \"snapshot_id\",\n  \"userId\": \"user_id\",\n  \"date\": \"2025-10-10T00:00:00.000Z\",\n  \"snapshot\": {\n    \"totalValue\": 50000,\n    \"items\": {}\n  },\n  \"createdAt\": \"2025-10-10T12:00:00.000Z\"\n}"
            }
          ]
        }
      ],
      "description": "Financial products from external MI service"
    },
    {
      "name": "Bank Integration (TrueLayer)",
      "item": [
        {
          "name": "Get Available Bank Providers",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{auth_token}}"
              }
            ],
            "url": {
              "raw": "{{rootUrl}}/api/bank/providers",
              "host": [
                "{{rootUrl}}"
              ],
              "path": [
                "api",
                "bank",
                "providers"
              ]
            },
            "description": "Retrieve list of supported Spanish banks (Santander, BBVA) via TrueLayer"
          },
          "response": []
        },
        {
          "name": "Get Authorization URL",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200) {",
                  "    const jsonData = pm.response.json();",
                  "    console.log(\"Redirect user to:\", jsonData.authorizationUrl);",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{auth_token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"state\": \"{{user_id}}\"\n}"
            },
            "url": {
              "raw": "{{rootUrl}}/api/bank/authorize",
              "host": [
                "{{rootUrl}}"
              ],
              "path": [
                "api",
                "bank",
                "authorize"
              ]
            },
            "description": "Generate TrueLayer authorization URL. The state parameter should contain the user ID for the callback. Redirect user to the returned URL to connect their Santander or BBVA account."
          },
          "response": []
        },
        {
          "name": "Get All Bank Connections",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{auth_token}}"
              }
            ],
            "url": {
              "raw": "{{rootUrl}}/api/bank/connections",
              "host": [
                "{{rootUrl}}"
              ],
              "path": [
                "api",
                "bank",
                "connections"
              ]
            },
            "description": "Retrieve all connected banks for the user (Santander, BBVA, etc.). Each connection includes bankId, bankName, and list of connected accounts."
          },
          "response": []
        },
        {
          "name": "Delete Bank Connection",
          "request": {
            "method": "DELETE",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{auth_token}}"
              }
            ],
            "url": {
              "raw": "{{rootUrl}}/api/bank/connections/{{bank_id}}",
              "host": [
                "{{rootUrl}}"
              ],
              "path": [
                "api",
                "bank",
                "connections",
                "{{bank_id}}"
              ]
            },
            "description": "Remove a bank connection. Use the bankId from the connections list (e.g., 'santander', 'bbva')."
          },
          "response": []
        },
        {
          "name": "Update Bank Connection",
          "request": {
            "method": "PATCH",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{auth_token}}"
              }
            ],
            "body": {
              "mode": "formdata",
              "formdata": [
                {
                  "key": "alias",
                  "value": "My Santander",
                  "type": "text",
                  "description": "Custom alias for this bank connection"
                },
                {
                  "key": "logo",
                  "type": "file",
                  "src": "",
                  "description": "Image file for bank logo (PNG, JPEG, WebP, SVG)"
                }
              ]
            },
            "url": {
              "raw": "{{rootUrl}}/api/bank/connections/{{bank_id}}",
              "host": [
                "{{rootUrl}}"
              ],
              "path": [
                "api",
                "bank",
                "connections",
                "{{bank_id}}"
              ]
            },
            "description": "Update a bank connection's alias or logo. Upload an image file (PNG, JPEG, WebP, SVG) for the logo. The image will be uploaded to S3 and the URL stored."
          },
          "response": []
        },
        {
          "name": "[DEPRECATED] Get All Connected Accounts",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{auth_token}}"
              }
            ],
            "url": {
              "raw": "{{rootUrl}}/api/bank/accounts",
              "host": [
                "{{rootUrl}}"
              ],
              "path": [
                "api",
                "bank",
                "accounts"
              ]
            },
            "description": "⚠️ DEPRECATED: This endpoint has been removed. Bank accounts are now included in the unified GET /api/products endpoint, which returns accounts from all sources (MyInvestor and TrueLayer) in the 'bankAccounts' field."
          },
          "response": []
        },
        {
          "name": "Get Account Balance",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{auth_token}}"
              }
            ],
            "url": {
              "raw": "{{rootUrl}}/api/bank/accounts/{{account_id}}/balance",
              "host": [
                "{{rootUrl}}"
              ],
              "path": [
                "api",
                "bank",
                "accounts",
                "{{account_id}}",
                "balance"
              ]
            },
            "description": "Get current balance for a specific bank account. The system automatically identifies which bank connection owns this account."
          },
          "response": []
        },
        {
          "name": "Get Account Transactions",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{auth_token}}"
              }
            ],
            "url": {
              "raw": "{{rootUrl}}/api/bank/accounts/{{account_id}}/transactions?from=2024-01-01&to=2024-01-31",
              "host": [
                "{{rootUrl}}"
              ],
              "path": [
                "api",
                "bank",
                "accounts",
                "{{account_id}}",
                "transactions"
              ],
              "query": [
                {
                  "key": "from",
                  "value": "2024-01-01",
                  "description": "Start date (ISO 8601)"
                },
                {
                  "key": "to",
                  "value": "2024-01-31",
                  "description": "End date (ISO 8601)"
                }
              ]
            },
            "description": "Fetch transactions for a specific bank account. The system automatically identifies which bank connection owns this account."
          },
          "response": []
        },
        {
          "name": "Sync Transactions",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{auth_token}}"
              }
            ],
            "url": {
              "raw": "{{rootUrl}}/api/bank/sync",
              "host": [
                "{{rootUrl}}"
              ],
              "path": [
                "api",
                "bank",
                "sync"
              ]
            },
            "description": "Sync bank transactions for the authenticated user. Fetches new transactions from all connected banks, stores them locally, creates expenses/incomes automatically, and sends push notifications."
          },
          "response": []
        }
      ],
      "description": "Bank integration via TrueLayer API for open banking. Connect multiple banks (Santander, BBVA) simultaneously. Each bank connection is stored separately, allowing you to fetch accounts and transactions from all connected banks at once."
    },
    {
      "name": "Bank Transactions",
      "item": [
        {
          "name": "Get All Bank Transactions",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{auth_token}}"
              }
            ],
            "url": {
              "raw": "{{rootUrl}}/api/bank-transactions?limit=50&offset=0",
              "host": [
                "{{rootUrl}}"
              ],
              "path": [
                "api",
                "bank-transactions"
              ],
              "query": [
                {
                  "key": "accountId",
                  "value": "",
                  "description": "Filter by account ID",
                  "disabled": true
                },
                {
                  "key": "bankId",
                  "value": "",
                  "description": "Filter by bank ID (e.g., 'santander', 'bbva')",
                  "disabled": true
                },
                {
                  "key": "type",
                  "value": "DEBIT",
                  "description": "Filter by type (CREDIT or DEBIT)",
                  "disabled": true
                },
                {
                  "key": "processed",
                  "value": "false",
                  "description": "Filter by processed status",
                  "disabled": true
                },
                {
                  "key": "from",
                  "value": "2025-01-01",
                  "description": "Filter from date (ISO 8601)",
                  "disabled": true
                },
                {
                  "key": "to",
                  "value": "2025-01-31",
                  "description": "Filter to date (ISO 8601)",
                  "disabled": true
                },
                {
                  "key": "search",
                  "value": "",
                  "description": "Search in description and merchant name (case-insensitive)",
                  "disabled": true
                },
                {
                  "key": "limit",
                  "value": "50",
                  "description": "Number of results"
                },
                {
                  "key": "offset",
                  "value": "0",
                  "description": "Skip first N results"
                }
              ]
            },
            "description": "Retrieve all bank transactions stored locally. These are transactions synced from TrueLayer and stored in the database. Supports filtering by account, bank, type, date range, and processed status."
          },
          "response": []
        },
        {
          "name": "Get Transaction Statistics",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{auth_token}}"
              }
            ],
            "url": {
              "raw": "{{rootUrl}}/api/bank-transactions/stats",
              "host": [
                "{{rootUrl}}"
              ],
              "path": [
                "api",
                "bank-transactions",
                "stats"
              ],
              "query": [
                {
                  "key": "bankId",
                  "value": "",
                  "description": "Filter by bank ID",
                  "disabled": true
                },
                {
                  "key": "accountId",
                  "value": "",
                  "description": "Filter by account ID",
                  "disabled": true
                },
                {
                  "key": "from",
                  "value": "2025-01-01",
                  "description": "Start date for stats",
                  "disabled": true
                },
                {
                  "key": "to",
                  "value": "2025-01-31",
                  "description": "End date for stats",
                  "disabled": true
                }
              ]
            },
            "description": "Get aggregated statistics for bank transactions including total credits, debits, and counts."
          },
          "response": []
        },
        {
          "name": "Get Transaction by ID",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{auth_token}}"
              }
            ],
            "url": {
              "raw": "{{rootUrl}}/api/bank-transactions/{{transaction_id}}",
              "host": [
                "{{rootUrl}}"
              ],
              "path": [
                "api",
                "bank-transactions",
                "{{transaction_id}}"
              ]
            },
            "description": "Retrieve a single bank transaction by its ID."
          },
          "response": []
        },
        {
          "name": "Update Transaction",
          "request": {
            "method": "PATCH",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{auth_token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"processed\": true,\n  \"notified\": true\n}"
            },
            "url": {
              "raw": "{{rootUrl}}/api/bank-transactions/{{transaction_id}}",
              "host": [
                "{{rootUrl}}"
              ],
              "path": [
                "api",
                "bank-transactions",
                "{{transaction_id}}"
              ]
            },
            "description": "Update a bank transaction's processed or notified status."
          },
          "response": []
        },
        {
          "name": "Delete Transaction",
          "request": {
            "method": "DELETE",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{auth_token}}"
              }
            ],
            "url": {
              "raw": "{{rootUrl}}/api/bank-transactions/{{transaction_id}}",
              "host": [
                "{{rootUrl}}"
              ],
              "path": [
                "api",
                "bank-transactions",
                "{{transaction_id}}"
              ]
            },
            "description": "Delete a bank transaction from the local database."
          },
          "response": []
        }
      ],
      "description": "Manage locally stored bank transactions. These transactions are synced from TrueLayer and stored in MongoDB. When synced, they automatically create corresponding expenses/incomes."
    },
    {
      "name": "API Documentation",
      "item": [
        {
          "name": "Get Swagger Documentation",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{rootUrl}}/api/docs",
              "host": [
                "{{rootUrl}}"
              ],
              "path": [
                "api",
                "docs"
              ]
            },
            "description": "Access the interactive Swagger API documentation"
          }
        }
      ],
      "description": "API documentation and exploration"
    },
    {
      "name": "Crypto Assets",
      "item": [
        {
          "name": "Get All Crypto Assets",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{auth_token}}"
              }
            ],
            "url": {
              "raw": "{{rootUrl}}/api/crypto-assets",
              "host": [
                "{{rootUrl}}"
              ],
              "path": [
                "api",
                "crypto-assets"
              ]
            },
            "description": "Retrieve all crypto assets for the authenticated user"
          }
        },
        {
          "name": "Get Crypto Asset by ID",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{auth_token}}"
              }
            ],
            "url": {
              "raw": "{{rootUrl}}/api/crypto-assets/{{crypto_asset_id}}",
              "host": [
                "{{rootUrl}}"
              ],
              "path": [
                "api",
                "crypto-assets",
                "{{crypto_asset_id}}"
              ]
            },
            "description": "Retrieve a specific crypto asset by ID"
          }
        },
        {
          "name": "Create Crypto Asset",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 201) {",
                  "    const jsonData = pm.response.json();",
                  "    pm.environment.set(\"crypto_asset_id\", jsonData.id);",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{auth_token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Bitcoin\",\n  \"code\": \"BTC\",\n  \"amount\": 0.5\n}"
            },
            "url": {
              "raw": "{{rootUrl}}/api/crypto-assets",
              "host": [
                "{{rootUrl}}"
              ],
              "path": [
                "api",
                "crypto-assets"
              ]
            },
            "description": "Create a new crypto asset"
          }
        },
        {
          "name": "Update Crypto Asset",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{auth_token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Bitcoin\",\n  \"code\": \"BTC\",\n  \"amount\": 0.75\n}"
            },
            "url": {
              "raw": "{{rootUrl}}/api/crypto-assets/{{crypto_asset_id}}",
              "host": [
                "{{rootUrl}}"
              ],
              "path": [
                "api",
                "crypto-assets",
                "{{crypto_asset_id}}"
              ]
            },
            "description": "Update an existing crypto asset"
          }
        },
        {
          "name": "Delete Crypto Asset",
          "request": {
            "method": "DELETE",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{auth_token}}"
              }
            ],
            "url": {
              "raw": "{{rootUrl}}/api/crypto-assets/{{crypto_asset_id}}",
              "host": [
                "{{rootUrl}}"
              ],
              "path": [
                "api",
                "crypto-assets",
                "{{crypto_asset_id}}"
              ]
            },
            "description": "Delete an existing crypto asset"
          }
        }
      ],
      "description": "Complete CRUD operations for crypto asset management"
    },
    {
      "name": "Upload",
      "item": [
        {
          "name": "Upload Media",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{auth_token}}",
                  "type": "string"
                }
              ]
            },
            "method": "POST",
            "header": [],
            "body": {
              "mode": "formdata",
              "formdata": [
                {
                  "key": "file",
                  "type": "file",
                  "src": []
                },
                {
                  "key": "type",
                  "value": "counterparty-logo",
                  "description": "Media type: counterparty-logo, profile-picture, receipt, document, or other",
                  "type": "text"
                }
              ]
            },
            "url": {
              "raw": "{{rootUrl}}/api/upload/media",
              "host": [
                "{{rootUrl}}"
              ],
              "path": [
                "api",
                "upload",
                "media"
              ]
            },
            "description": "Upload media file to S3. Files are organized by user ID and media type: users/{userId}/{type}/{filename}"
          },
          "response": [
            {
              "name": "Success",
              "originalRequest": {
                "method": "POST",
                "header": [],
                "body": {
                  "mode": "formdata",
                  "formdata": [
                    {
                      "key": "file",
                      "type": "file",
                      "src": []
                    },
                    {
                      "key": "type",
                      "value": "counterparty-logo",
                      "type": "text"
                    }
                  ]
                },
                "url": {
                  "raw": "{{rootUrl}}/api/upload/media",
                  "host": [
                    "{{rootUrl}}"
                  ],
                  "path": [
                    "api",
                    "upload",
                    "media"
                  ]
                }
              },
              "status": "OK",
              "code": 200,
              "_postman_previewlanguage": "json",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
              "cookie": [],
              "body": "{\n  \"url\": \"https://fintrak-media-prod.s3.eu-west-1.amazonaws.com/users/68835f15998c6de77ad7a51b/counterparty-logo/58feb8671193816378bc3987192537e3.png\",\n  \"type\": \"counterparty-logo\",\n  \"userId\": \"68835f15998c6de77ad7a51b\"\n}"
            },
            {
              "name": "No File Uploaded",
              "originalRequest": {
                "method": "POST",
                "header": [],
                "body": {
                  "mode": "formdata",
                  "formdata": [
                    {
                      "key": "type",
                      "value": "counterparty-logo",
                      "type": "text"
                    }
                  ]
                },
                "url": {
                  "raw": "{{rootUrl}}/api/upload/media",
                  "host": [
                    "{{rootUrl}}"
                  ],
                  "path": [
                    "api",
                    "upload",
                    "media"
                  ]
                }
              },
              "status": "Bad Request",
              "code": 400,
              "_postman_previewlanguage": "json",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
              "cookie": [],
              "body": "{\n  \"error\": \"No file uploaded\"\n}"
            },
            {
              "name": "Unauthorized",
              "originalRequest": {
                "method": "POST",
                "header": [],
                "body": {
                  "mode": "formdata",
                  "formdata": [
                    {
                      "key": "file",
                      "type": "file",
                      "src": []
                    },
                    {
                      "key": "type",
                      "value": "counterparty-logo",
                      "type": "text"
                    }
                  ]
                },
                "url": {
                  "raw": "{{rootUrl}}/api/upload/media",
                  "host": [
                    "{{rootUrl}}"
                  ],
                  "path": [
                    "api",
                    "upload",
                    "media"
                  ]
                }
              },
              "status": "Unauthorized",
              "code": 401,
              "_postman_previewlanguage": "json",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
              "cookie": [],
              "body": "{\n  \"error\": \"Unauthorized\"\n}"
            }
          ]
        }
      ],
      "description": "Upload media files to AWS S3 organized by user ID and media type"
    },
    {
      "name": "Notifications",
      "item": [
        {
          "name": "Register Device for Push Notifications",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{auth_token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"token\": \"ExponentPushToken[xxxxxxxxxxxxxxxxxxxxxx]\",\n  \"platform\": \"ios\"\n}"
            },
            "url": {
              "raw": "{{rootUrl}}/api/notifications/register",
              "host": [
                "{{rootUrl}}"
              ],
              "path": [
                "api",
                "notifications",
                "register"
              ]
            },
            "description": "Register a device to receive push notifications. The token is an Expo Push Token obtained from the mobile app. Platform must be 'ios' or 'android'."
          },
          "response": [
            {
              "name": "Success",
              "originalRequest": {
                "method": "POST",
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{auth_token}}"
                  },
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"token\": \"ExponentPushToken[xxxxxxxxxxxxxxxxxxxxxx]\",\n  \"platform\": \"ios\"\n}"
                },
                "url": {
                  "raw": "{{rootUrl}}/api/notifications/register",
                  "host": [
                    "{{rootUrl}}"
                  ],
                  "path": [
                    "api",
                    "notifications",
                    "register"
                  ]
                }
              },
              "status": "OK",
              "code": 200,
              "_postman_previewlanguage": "json",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
              "cookie": [],
              "body": "{\n  \"message\": \"Device registered successfully\",\n  \"deviceToken\": {\n    \"id\": \"60d0fe4f5311236168a109ca\",\n    \"token\": \"ExponentPushToken[xxxxxxxxxxxxxxxxxxxxxx]\",\n    \"platform\": \"ios\",\n    \"active\": true\n  }\n}"
            }
          ]
        },
        {
          "name": "Unregister Device from Push Notifications",
          "request": {
            "method": "DELETE",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{auth_token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"token\": \"ExponentPushToken[xxxxxxxxxxxxxxxxxxxxxx]\"\n}"
            },
            "url": {
              "raw": "{{rootUrl}}/api/notifications/register",
              "host": [
                "{{rootUrl}}"
              ],
              "path": [
                "api",
                "notifications",
                "register"
              ]
            },
            "description": "Unregister a device from push notifications. The device will no longer receive notifications until re-registered."
          },
          "response": [
            {
              "name": "Success",
              "originalRequest": {
                "method": "DELETE",
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{auth_token}}"
                  },
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"token\": \"ExponentPushToken[xxxxxxxxxxxxxxxxxxxxxx]\"\n}"
                },
                "url": {
                  "raw": "{{rootUrl}}/api/notifications/register",
                  "host": [
                    "{{rootUrl}}"
                  ],
                  "path": [
                    "api",
                    "notifications",
                    "register"
                  ]
                }
              },
              "status": "OK",
              "code": 200,
              "_postman_previewlanguage": "json",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
              "cookie": [],
              "body": "{\n  \"message\": \"Device unregistered successfully\"\n}"
            }
          ]
        }
      ],
      "description": "Push notification management for mobile devices. Register devices to receive transaction alerts and other notifications via Expo Push Notifications."
    },
    {
      "name": "Cron",
      "item": [
        {
          "name": "Create Daily Snapshots for All Users",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "x-api-key",
                "value": "{{cron_api_key}}",
                "description": "Internal API key for cron jobs"
              }
            ],
            "url": {
              "raw": "{{rootUrl}}/api/cron/snapshots/daily",
              "host": [
                "{{rootUrl}}"
              ],
              "path": [
                "api",
                "cron",
                "snapshots",
                "daily"
              ]
            },
            "description": "Internal endpoint to create daily snapshots for all users. Should be called by AWS EventBridge or similar scheduler. Requires API key authentication."
          },
          "response": [
            {
              "name": "Success",
              "originalRequest": {
                "method": "POST",
                "header": [
                  {
                    "key": "x-api-key",
                    "value": "{{cron_api_key}}"
                  }
                ],
                "url": {
                  "raw": "{{rootUrl}}/api/cron/snapshots/daily",
                  "host": [
                    "{{rootUrl}}"
                  ],
                  "path": [
                    "api",
                    "cron",
                    "snapshots",
                    "daily"
                  ]
                }
              },
              "status": "OK",
              "code": 200,
              "_postman_previewlanguage": "json",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
              "cookie": [],
              "body": "{\n  \"message\": \"Daily snapshots creation completed\",\n  \"results\": {\n    \"total\": 5,\n    \"successful\": 5,\n    \"failed\": 0,\n    \"errors\": []\n  }\n}"
            },
            {
              "name": "Unauthorized - Invalid API Key",
              "originalRequest": {
                "method": "POST",
                "header": [
                  {
                    "key": "x-api-key",
                    "value": "invalid-key"
                  }
                ],
                "url": {
                  "raw": "{{rootUrl}}/api/cron/snapshots/daily",
                  "host": [
                    "{{rootUrl}}"
                  ],
                  "path": [
                    "api",
                    "cron",
                    "snapshots",
                    "daily"
                  ]
                }
              },
              "status": "Unauthorized",
              "code": 401,
              "_postman_previewlanguage": "json",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
              "cookie": [],
              "body": "{\n  \"error\": \"Unauthorized\"\n}"
            }
          ]
        },
        {
          "name": "Sync Bank Transactions",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "x-api-key",
                "value": "{{cron_api_key}}",
                "description": "Internal API key for cron jobs"
              }
            ],
            "url": {
              "raw": "{{rootUrl}}/api/cron/sync-transactions",
              "host": [
                "{{rootUrl}}"
              ],
              "path": [
                "api",
                "cron",
                "sync-transactions"
              ]
            },
            "description": "Sync bank transactions for all users. Fetches new transactions from TrueLayer, stores them in database, auto-creates expenses/incomes, and sends push notifications. Should be called every hour at :05 by AWS EventBridge."
          },
          "response": [
            {
              "name": "Success",
              "originalRequest": {
                "method": "POST",
                "header": [
                  {
                    "key": "x-api-key",
                    "value": "{{cron_api_key}}"
                  }
                ],
                "url": {
                  "raw": "{{rootUrl}}/api/cron/sync-transactions",
                  "host": [
                    "{{rootUrl}}"
                  ],
                  "path": [
                    "api",
                    "cron",
                    "sync-transactions"
                  ]
                }
              },
              "status": "OK",
              "code": 200,
              "_postman_previewlanguage": "json",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
              "cookie": [],
              "body": "{\n  \"message\": \"Transaction sync completed\",\n  \"results\": {\n    \"totalSynced\": 15,\n    \"totalErrors\": 0,\n    \"usersProcessed\": 2\n  }\n}"
            }
          ]
        }
      ],
      "description": "Scheduled cron jobs for automated tasks"
    }
  ],
  "event": [
    {
      "listen": "prerequest",
      "script": {
        "type": "text/javascript",
        "exec": [
          ""
        ]
      }
    },
    {
      "listen": "test",
      "script": {
        "type": "text/javascript",
        "exec": [
          ""
        ]
      }
    }
  ],
  "variable": [
    {
      "key": "rootUrl",
      "value": "http://localhost:3000",
      "type": "string"
    }
  ]
}
